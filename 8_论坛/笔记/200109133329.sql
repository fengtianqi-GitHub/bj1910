/*
MySQL Backup
Source Server Version: 5.7.17
Source Database: bj1910
Date: 2020/1/9 13:33:29
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
--  Table structure for `bbs_category`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_category`;
CREATE TABLE `bbs_category` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `classname` varchar(60) DEFAULT NULL,
  `parentid` int(11) NOT NULL DEFAULT '0',
  `replycount` smallint(6) DEFAULT '0',
  `forumcount` smallint(6) DEFAULT '0',
  `compere` varchar(20) DEFAULT NULL,
  `classpic` varchar(200) DEFAULT 'index/images/forum.gif',
  `descrition` varchar(200) DEFAULT NULL,
  `orderby` smallint(6) DEFAULT NULL,
  `lastpost` varchar(3000) DEFAULT NULL,
  `ispass` tinyint(4) DEFAULT '1',
  PRIMARY KEY (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `bbs_closeip`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_closeip`;
CREATE TABLE `bbs_closeip` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `ip` int(12) NOT NULL,
  `addtime` int(12) NOT NULL,
  `overtime` int(12) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `bbs_link`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_link`;
CREATE TABLE `bbs_link` (
  `lid` smallint(6) NOT NULL AUTO_INCREMENT,
  `displayorder` tinyint(2) NOT NULL DEFAULT '0',
  `name` varchar(30) NOT NULL,
  `url` varchar(255) NOT NULL,
  `description` mediumtext,
  `logo` varchar(255) DEFAULT NULL,
  `addtime` int(12) NOT NULL,
  PRIMARY KEY (`lid`)
) ENGINE=MyISAM AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `bbs_order`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_order`;
CREATE TABLE `bbs_order` (
  `oid` int(10) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL,
  `tid` int(11) NOT NULL,
  `rate` int(11) NOT NULL,
  `addtime` int(11) NOT NULL,
  `ispay` tinyint(2) NOT NULL DEFAULT '0' COMMENT '是否已付款',
  PRIMARY KEY (`oid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `bbs_post`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_post`;
CREATE TABLE `bbs_post` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `tid` int(10) DEFAULT NULL,
  `authorid` int(10) NOT NULL,
  `title` varchar(600) NOT NULL,
  `content` mediumtext NOT NULL,
  `addtime` int(12) NOT NULL,
  `addip` int(12) NOT NULL,
  `classid` int(10) NOT NULL,
  `replycount` int(12) NOT NULL DEFAULT '0',
  `hits` int(12) NOT NULL DEFAULT '0',
  `istop` tinyint(2) NOT NULL DEFAULT '0',
  `elite` tinyint(2) NOT NULL DEFAULT '0',
  `ishot` tinyint(2) NOT NULL DEFAULT '0',
  `rate` smallint(3) NOT NULL DEFAULT '0',
  `attachment` smallint(3) DEFAULT NULL,
  `isdel` tinyint(2) NOT NULL DEFAULT '0',
  `style` char(10) DEFAULT NULL,
  `isdisplay` tinyint(2) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=709 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `bbs_reply`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_reply`;
CREATE TABLE `bbs_reply` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `tid` int(10) DEFAULT NULL,
  `authorid` int(10) NOT NULL,
  `content` mediumtext NOT NULL,
  `addtime` int(12) NOT NULL,
  `addip` int(12) NOT NULL,
  `classid` int(10) NOT NULL,
  `isdel` tinyint(2) NOT NULL DEFAULT '0',
  `isdisplay` tinyint(2) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=709 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Table structure for `bbs_user`
-- ----------------------------
DROP TABLE IF EXISTS `bbs_user`;
CREATE TABLE `bbs_user` (
  `uid` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(60) DEFAULT NULL,
  `password_hash` varchar(128) NOT NULL,
  `usertype` tinyint(4) DEFAULT '0',
  `sex` int(11) DEFAULT NULL,
  `birthday` date DEFAULT NULL,
  `realname` varchar(60) DEFAULT NULL,
  `portrait` varchar(200) DEFAULT NULL,
  `regtime` datetime DEFAULT NULL,
  `qq` varchar(15) DEFAULT NULL,
  `signature` varchar(300) DEFAULT NULL,
  `answer` varchar(300) DEFAULT NULL,
  `isactive` tinyint(1) DEFAULT NULL,
  `email` varchar(300) DEFAULT NULL,
  `lasttime` datetime DEFAULT NULL,
  `allowlogin` tinyint(4) DEFAULT '0',
  `grade` int(11) DEFAULT '0',
  PRIMARY KEY (`uid`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=256 DEFAULT CHARSET=utf8;

-- ----------------------------
--  Records 
-- ----------------------------
INSERT INTO `bbs_category` VALUES ('1','python基础','0','0','0',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('2','ubuntu','0','2','2',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('3','数据库','0','1','1',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('4','web前端','0','0','0',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('5','数据类型','1','0','0',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('6','函数','1','1','2',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('7','面向对象','1','1','0',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('8','环境安装','2','1','0',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1'), ('9','虚拟环境配置','2','0','0',NULL,'index/images/forum.gif',NULL,NULL,NULL,'1');
INSERT INTO `bbs_closeip` VALUES ('2','203455243','1567075617','1569667617'), ('3','16843009','1567079759','1569671759'), ('4','0','1567079820','1567166220'), ('5','167799009','1567079930','1569671930'), ('6','16843009','1567135320','1567308120'), ('7','1684300900','1567487890','1570079890');
INSERT INTO `bbs_link` VALUES ('1','2','twserdtfjgh','http://www.discuz.net','提供最新 Discuz! 产品新闻、软件下载与技术交流','public/images/logo_88_31.gif','2147483647'), ('9','1','kjk.kj','khkg','hkghk','gkgk','1567081546'), ('10','4','百度','https://www.baidu.com','','a ','1567084942'), ('11','9','tttt','jjjjjjj','00000','jjjjjjjjjj','1567127931'), ('8','8','阿','123','阿萨德','啊','1567046514');
INSERT INTO `bbs_post` VALUES ('1','0','1','php底层工作原理','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">从图上可以看出，php从下到上是一个4层体系</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">①zend引擎</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend整体用纯c实现，是php的内核部分，它将php代码翻译（词法、语法解析等一系列编译过程）为可执行opcode的处理并实现相应的处理方法、实现了基本的数据结构（如hashtable、oo）、内存分配及管理、提供了相应的api方法供外部调用，是一切的核心，所有的外围功能均围绕zend实现。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">②extensions</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">围绕着zend引擎，extensions通过组件式的方式提供各种基础服务，我们常见的各种内置函数（如array系列）、标准库等都是通过extension来实现，用户也可以根据需要实现自己的extension以达到功能扩展、性能优化等目的（如贴吧正在使用的php中间层、富文本解析就是extension的典型应用）。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">③sapi</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi全称是server application programming interface，也就是服务端应用编程接口，sapi通过一系列钩子函数，使得php可以和外围交互数据，这是php非常优雅和成功的一个设计，通过sapi成功的将php本身和上层应用解耦隔离，php可以不再考虑如何针对不同应用进行兼容，而应用本身也可以针对自己的特点实现不同的处理方式。后面将在sapi章节中介绍</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">④上层应用</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">这就是我们平时编写的php程序，通过不同的sapi方式得到各种各样的应用模式，如通过webserver实现web应用、在命令行下以脚本方式运行等等。</span></p>','1444300743','-1062731039','5','0','894','0','0','0','0',NULL,'0',NULL,'0'), ('2','0','1','深入理解php原理之opcodes','<table cellpadding=\"0\" cellspacing=\"0\" style=\"word-wrap: break-word; empty-cells: show; border-collapse: collapse; table-layout: fixed; width: 1141px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; line-height: 18px;\">\r\n  <tbody style=\"word-wrap: break-word;\">\r\n    <tr style=\"word-wrap: break-word;\">\r\n     <td class=\"t_f\" id=\"postmessage_555349\" style=\"word-wrap: break-word; font-size: 14px;\">\r\n        &middot; 作者:laruence(<a href=\"http://www.laruence.com/\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://www.laruence.com/)</a><br style=\"word-wrap: break-word;\" />\r\n        &middot; 本文地址:&nbsp;<a href=\"http://www.laruence.com/2008/06/18/221.html\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://www.laruence.com/2008/06/18/221.html</a><br style=\"word-wrap: break-word;\" />\r\n        &middot; 转载请注明出处&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp; 最近要给yahoo的同事们做一个关于php和apache处理请求的内部机制的讲座，刚好写了些关于opcodes的文字，就发上来了，这个文章基于 sara golemon的 understanding opcode<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp; opcode是一种php脚本编译后的中间语言，就像java的bytecode,或者.net的msl，举个例子，比如你写下了如下的php代码：<br style=\"word-wrap: break-word;\" />\r\n       <font color=\"blue\" style=\"word-wrap: break-word;\">&lt;?php</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word;\">hello world</font><font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word;\">;<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;</font><font color=\"#008b00\" style=\"word-wrap: break-word;\">$a</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;+&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"gray\" style=\"word-wrap: break-word;\">;<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"#008b00\" style=\"word-wrap: break-word;\">$a</font><font color=\"gray\" style=\"word-wrap: break-word;\">;</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"blue\" style=\"word-wrap: break-word;\">?&gt;</font><br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;php执行这段代码会经过如下4个步骤(确切的来说，应该是php的语言引擎zend)<br style=\"word-wrap: break-word;\" />\r\n        1.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;scanning(lexing) ,将php代码转换为语言片段(tokens)<br style=\"word-wrap: break-word;\" />\r\n       2.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;parsing, 将tokens转换成简单而有意义的表达式<br style=\"word-wrap: break-word;\" />\r\n       3.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;compilation, 将表达式编译成opocdes<br style=\"word-wrap: break-word;\" />\r\n       4.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;execution, 顺次执行opcodes，每次一条，从而实现php脚本的功能。<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;题外话:现在有的cache比如apc,可以使得php缓存住opcodes，这样，每次有请求来临的时候，就不需要重复执行前面3步，从而能大幅的提高php的执行速度。<br style=\"word-wrap: break-word;\" />\r\n       那什么是lexing? 学过编译原理的同学都应该对编译原理中的词法分析步骤有所了解，lex就是一个词法分析的依据表。zend/zend_language_scanner.c会根据zend/zend_language_scanner.l(lex文件),来对输入的php代码进行词法分析，从而得到一个一个的&ldquo;词&rdquo;，php4.2开始提供了一个函数叫token_get_all,这个函数就可以讲一段php代码scanning成tokens；<br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;如果用这个函数处理我们开头提到的php代码，将会得到如下结果:<br style=\"word-wrap: break-word;\" />\r\n        <font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">367</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">316</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">2</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">3</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">315</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word;\">hello world</font><font color=\"#8b0000\" style=\"word-wrap: break-word;\">&quot;</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">4</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; ;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">5</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">6</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; =<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">7</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">8</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">305</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">9</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">10</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; +<br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">11</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">12</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">305</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">13</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; ;<br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">14</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">15</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">316</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">echo</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">16</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word;\">array</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">(</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word;\">370</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt;<br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">[</font><font color=\"maroon\" style=\"word-wrap: break-word;\">17</font><font color=\"olive\" style=\"word-wrap: break-word;\">]</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;=&gt; ;</font><br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       <font color=\"olive\" style=\"word-wrap: break-word;\">)</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"gray\" style=\"word-wrap: break-word;\">?&gt;</font><br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       分析这个返回结果我们可以发现，源码中的字符串，字符，空格，都会原样返回。每个源代码中的字符，都会出现在相应的顺序处。而，其他的比如标签，操作符，语句，都会被转换成一个包含俩部分的array: token id(也就是在zend内部的改token的对应码，比如,t_echo,t_string)，和源码中的原来的内容。<br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;接下来，就是parsing阶段了，parsing首先会丢弃tokens array中的多于的空格，然后将剩余的tokens转换成一个一个的简单的表达式<br style=\"word-wrap: break-word;\" />\r\n        1.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;echo a constant string<br style=\"word-wrap: break-word;\" />\r\n        2.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;add two numbers together<br style=\"word-wrap: break-word;\" />\r\n        3.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;store the result of the prior expression to a variable<br style=\"word-wrap: break-word;\" />\r\n        4.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;echo a variable<br style=\"word-wrap: break-word;\" />\r\n       然后就改compilation阶段了，它会把tokens编译成一个个op_array, 每个op_arrayd包含如下5个部分：<br style=\"word-wrap: break-word;\" />\r\n       1.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;opcode数字的标识，指明了每个op_array的操作类型，比如add , echo<br style=\"word-wrap: break-word;\" />\r\n       2.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;结果&nbsp; &nbsp;&nbsp; &nbsp; 存放opcode结果<br style=\"word-wrap: break-word;\" />\r\n       3.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;操作数1&nbsp;&nbsp;给opcode的操作数<br style=\"word-wrap: break-word;\" />\r\n       4.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;操作数2<br style=\"word-wrap: break-word;\" />\r\n        5.&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;扩展值&nbsp; &nbsp;1个整形用来区别被重载的操作符<br style=\"word-wrap: break-word;\" />\r\n       &nbsp;&nbsp;比如，我们的php代码会被parsing成:<br style=\"word-wrap: break-word;\" />\r\n       <font color=\"gray\" style=\"word-wrap: break-word;\">*&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_echo</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp;&nbsp;&nbsp;&#39;</font><font color=\"blue\" style=\"word-wrap: break-word;\">hello</font><br style=\"word-wrap: break-word;\" />\r\n        <font color=\"blue\" style=\"word-wrap: break-word;\">world</font><font color=\"gray\" style=\"word-wrap: break-word;\">&#39;<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp; *&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_add</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp;&nbsp; &nbsp; ~</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"maroon\" style=\"word-wrap: break-word;\">1</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp; *&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_assign</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;&nbsp;!</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp;~</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><br style=\"word-wrap: break-word;\" />\r\n       <font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp; *&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word;\">zend_echo</font><font color=\"gray\" style=\"word-wrap: break-word;\">&nbsp; &nbsp;&nbsp;&nbsp;!</font><font color=\"maroon\" style=\"word-wrap: break-word;\">0</font><br style=\"word-wrap: break-word;\" />\r\n        <br style=\"word-wrap: break-word;\" />\r\n       呵呵，你可能会问了，我们的$a去那里了？<br style=\"word-wrap: break-word;\" />\r\n       &nbsp; &nbsp;&nbsp; &nbsp; 恩，这个要介绍操作数了，每个操作数都是由以下俩个部分组成：<br style=\"word-wrap: break-word;\" />\r\n       a)&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;op_type : 为is_const, is_tmp_var, is_var, is_unused, or is_cv<br style=\"word-wrap: break-word;\" />\r\n        b)&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;u,一个联合体，根据op_type的不同，分别用不同的类型保存了这个操作数的值(const)或者左值(var)<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;&nbsp; &nbsp; 而对于var来说，每个var也不一样<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;&nbsp; &nbsp; is_tmp_var, 顾名思义，这个是一个临时变量，保存一些op_array的结果，以便接下来的op_array使用，这种的操作数的u保存着一个指向变量表的一个句柄（整数），这种操作数一般用~开头，比如~0,表示变量表的0号未知的临时变量<br style=\"word-wrap: break-word;\" />\r\n        is_var 这种就是我们一般意义上的变量了,他们以$开头表示<br style=\"word-wrap: break-word;\" />\r\n        is_cv 表示ze2.1/php5.1以后的编译器使用的一种cache机制，这种变量保存着被它引用的变量的地址，当一个变量第一次被引用的时候，就会被cv起来，以后对这个变量的引用就不需要再次去查找active符号表了，cv变量以！开头表示。<br style=\"word-wrap: break-word;\" />\r\n        &nbsp; &nbsp;这么看来，我们的$a被优化成!0了。</td>\r\n    </tr>\r\n </tbody>\r\n</table>\r\n<p>\r\n &nbsp;</p>','1444300799','-1062731039','5','0','647','0','0','0','0',NULL,'0',NULL,'0'), ('3','0','1','seaslog: 高效、便捷、稳定的php日志扩展','<p>\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">简介</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">为什么使用seaslog</span></p>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">log日志，通常是系统或软件、应用的运行记录。通过log的分析，可以方便用户了解系统或软件、应用的运行情况；如果你的应用log足够丰富，也可以分析以往用户的操作行为、类型喜好、地域分布或其他更多信息；如果一个应用的log同时也分了多个级别，那么可以很轻易地分析得到该应用的健康状况，及时发现问题并快速定位、解决问题，补救损失。</font></font></font></div>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">php内置error_log、syslog函数功能强大且性能极好，但由于各种缺陷(error_log无错误级别、无固定格式，syslog不分模块、与系统日志混合)，灵活度降低了很多，不能满足应用需求。</font></font></font></div>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">好消息是，有不少第三方的log类库弥补了上述缺陷，如log4php、plog、analog等(当然也有很多应用在项目中自己开发的log类)。其中以<font style=\"word-wrap: break-word; color: rgb(65, 131, 196);\">log4php</font>最为著名，设计精良、格式完美、文档完善、功能强大。推荐。(log4php的性能有待测试)</font></font></font></div>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">那么有没有一种log类库满足以下需求呢：</font></font></font></div>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    分模块、分级别</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    配置简单(最好是勿须配置)</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    日志格式清晰易读</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    应用简单、性能很棒</li>\r\n</ul>\r\n<div align=\"left\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <font style=\"word-wrap: break-word; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\">seaslog 正是应此需求而生。</font></font></font></div>\r\n<p>\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">目前提供了什么</span></p>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    在php项目中便捷、规范地记录log</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    可配置的默认log目录与模块</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    指定log目录与获取当前配置</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    初步的分析预警框架</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    高效的日志缓冲、便捷的缓冲debug</li>\r\n</ul>\r\n<p>\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">目标是怎样的</span></p>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    便捷、规范的log记录</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    高效的海量log分析</li>\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    可配置、多途径的log预警</li>\r\n</ul>\r\n<p>\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">安装</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">编译安装 seaslog</span></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_kjo\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">$ /path/to/phpize</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">$ ./configure --with-php-config=/path/to/php-config</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">$ make &amp;&amp; make install</span></font></font></font></li>\r\n   </ol>\r\n </div>\r\n  <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#008080\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></span></font></font></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">seaslog.ini的配置</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n &nbsp;</p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_fii\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">; configuration for php seaslog module</span></font></font></font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">extension = seaslog.so</span></font></font></font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.default_basepath = /log/seaslog-test&nbsp; &nbsp; ;默认log根目录</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.default_logger = default&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; ;默认logger目录</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.disting_type = 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;是否以type分文件 1是 0否(默认)</span></font></font></font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.disting_by_hour = 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;;是否每小时划分一个文件 1是 0否(默认)</span></font></font></font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\">seaslog.use_buffer = 1&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;;是否启用buffer 1是 0否(默认)</span></font></font></font></li>\r\n    </ol>\r\n </div>\r\n  <font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#001000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></span></font></font></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<blockquote style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <div align=\"left\" style=\"word-wrap: break-word;\">\r\n   seaslog.disting_type = 1 开启以type分文件，即log文件区分info\\warn\\erro</div>\r\n  <div align=\"left\" style=\"word-wrap: break-word;\">\r\n   seaslog.disting_by_hour = 1 开启每小时划分一个文件</div>\r\n <div align=\"left\" style=\"word-wrap: break-word;\">\r\n   seaslog.use_buffer = 1 开启buffer。默认关闭。当开启此项时，日志预存于内存，当请求结束时(或异常退出时)一次写入文件。</div>\r\n</blockquote>\r\n<p>\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">使用</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">常量与函数</span><span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">常量列表</span></p>\r\n<ul style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\r\n <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    seaslog_type_info = 1</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    seaslog_type_warn = 2</li>\r\n  <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: disc;\">\r\n    seaslog_type_erro = 3</li>\r\n</ul>\r\n<p>\r\n  <font style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px; color: rgb(51, 51, 51);\"><font face=\"helvetica, arial, freesans, clean, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 15px;\"><font style=\"word-wrap: break-word; color: rgb(0, 134, 179);\">var_dump</font>(seaslog_type_info,seaslog_type_warn,seaslog_type_erro);<font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">/*</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">int(1) info类型</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">int(2) warn类型</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">int(3) erro类型</i></font><font style=\"word-wrap: break-word; color: rgb(153, 153, 136);\"><i style=\"word-wrap: break-word;\">*/</i></font></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">函数列表</span></p>','1444300876','-1062731039','5','0','842','0','0','0','0',NULL,'0',NULL,'0'), ('4','0','1','深入理解php原理之对象(一)','<table cellpadding=\"0\" cellspacing=\"0\" style=\"word-wrap: break-word; empty-cells: show; border-collapse: collapse; table-layout: fixed; width: 1141px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; line-height: 18px;\">\r\n  <tbody style=\"word-wrap: break-word;\">\r\n    <tr style=\"word-wrap: break-word;\">\r\n     <td class=\"t_f\" id=\"postmessage_1530772\" style=\"word-wrap: break-word; font-size: 14px;\">\r\n       在php4以前, php并不支持面向对象, 到php4的时候, php引入了一些oop的关键字, 请注意我用的&rdquo;关键字&rdquo;, 因为在php4中的对象, 不过就是一个数组(属性)加上一个函数数组(方法), 没有访问权限控制, 没有析构函数, 等等.<br style=\"word-wrap: break-word;\" />\r\n       到php5以后, 随着zend engine 2的发布:\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           1. 访问权限控制</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           2. 接口的引入</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           3. 魔术方法</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           4. 接口的应用</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           5. 内置接口</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           等等</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       php5终于可以算是较完美的支持面向对象了.<br style=\"word-wrap: break-word;\" />\r\n       而这些看似复杂的实现, 在根本上, 还是没有脱离属性数组+方法数组的基本, 接下来我就为大家揭开隐藏在源代码中的秘密.<br style=\"word-wrap: break-word;\" />\r\n        <span style=\"word-wrap: break-word; font-weight: 700;\">对象的结构</span><br style=\"word-wrap: break-word;\" />\r\n        在php5中, 一个对象, 还是以一个zval做为载体的, 还记得什么是zval么(<a class=\"gj_safe_a\" href=\"http://www.laruence.com/2008/08/22/412.html\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\"><font color=\"#0000cc\" style=\"word-wrap: break-word;\">深入理解php原理之变量</font></a>).\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#96cbfe\" style=\"word-wrap: break-word;\">typedef</font>&nbsp;<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">union</font>&nbsp;_zvalue_value {</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp;<font color=\"#ffffb6\" style=\"word-wrap: break-word;\">long</font>&nbsp;lval;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp;<font color=\"#ffffb6\" style=\"word-wrap: break-word;\">double</font>&nbsp;dval;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp;<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">struct</font>&nbsp;{</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#ffffb6\" style=\"word-wrap: break-word;\">char</font>&nbsp;*val;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#ffffb6\" style=\"word-wrap: break-word;\">int</font>&nbsp;len;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; } str;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; hashtable<br style=\"word-wrap: break-word;\" />\r\n            *ht;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_object_value<br style=\"word-wrap: break-word;\" />\r\n            obj;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           } zvalue_value;&lt;/span</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       如果, 一个zval是对象, 那么zvalue_value中的obj, 就指向一个zend_object_value的实例.<br style=\"word-wrap: break-word;\" />\r\n       一个zend_object_value包含俩个成员, 一个是标识符(整形序号), 表明了当前对象存储在全局对象列表的位置, 另外还有一个zend_object_handlers指针, 指向当前对象所属类的handlers(标准操作集合).<br style=\"word-wrap: break-word;\" />\r\n        真正的对象实体, zend_object中, 保存了如下的关键信息入口:\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           1. ce, zend_class_entry 类入口</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           2. properties, hashtable 普通属性</li>\r\n        </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       <span style=\"word-wrap: break-word; font-weight: 700;\">对象的属性</span><br style=\"word-wrap: break-word;\" />\r\n        如上所述, 普通属性是一个的hashtable, 在php5以后, 引入了访问权限控制, 而访问权限属性, 是通过属性名进行区分的.\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           1. public&nbsp;&nbsp;属性名</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           2. private \\0类名\\0属性名</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           3. protected \\0*\\0属性</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       <br style=\"word-wrap: break-word;\" />\r\n       php通过这种比较ugly但是简单高效的方法, 实现了对属性访问权限的标识.知道了这个, 我们就可以干一些不合常理的事请, 比如访问对象的私有/保护属性(见:&nbsp;<a class=\"gj_safe_a\" href=\"http://bugs.php.net/bug.php?id=44273\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\"><font color=\"#0000cc\" style=\"word-wrap: break-word;\">bug #44273 access to private and protected class variables allowed when casting to array</font></a>):\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#96cbfe\" style=\"word-wrap: break-word;\">class</font>&nbsp;foo {</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; private&nbsp;<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$_name</font>&nbsp;=&nbsp;<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;laruence&quot;</font>;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; protected&nbsp;<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$_age</font>&nbsp;=&nbsp;<font color=\"#ff73fd\" style=\"word-wrap: break-word;\">28</font>;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           }</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$foo</font>&nbsp;=&nbsp;<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">new</font>&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">foo</font>();</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$arr</font>&nbsp;= (<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">array</font>)&nbsp;<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$foo</font>;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">var_dump</font>(<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$arr</font>[<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;\\0foo\\0_name&quot;</font>]);</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">var_dump</font>(<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$arr</font>[<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;\\0*\\0_age&quot;</font>]);</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">//output:</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">string</font>(<font color=\"#ff73fd\" style=\"word-wrap: break-word;\">8</font>)&nbsp;<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;laruence&quot;</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">int</font>(<font color=\"#ff73fd\" style=\"word-wrap: break-word;\">28</font>)&lt;/span</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       既然我说到了普通属性, 那么也就有不普通的属性:static/constant, 因为静态属性和常量属性都是和类相关而不是和对象相关的, 那么想到然的, 这些属性也就应该保存在类的结构中, 也就是zend_class_entry中. 对象的方法同理也是和类绑定的.在zend_class_entry, 有如下hashtable几个成员,\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           1. function_table, 方法集</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           2. default_static_members, 静态属性</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           3. default_properties, 默认的属性</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           4. constants_table, 常量</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       属性如其名, 对象类型的属性, 存放在对象的成员中.<br style=\"word-wrap: break-word;\" />\r\n       <span style=\"word-wrap: break-word; font-weight: 700;\">对象的方法</span><br style=\"word-wrap: break-word;\" />\r\n        在zend_class_entry中的function_table是个hashtable, 这个函数表的结构和普通的函数表一样(<a class=\"gj_safe_a\" href=\"http://www.laruence.com/2008/08/12/164.html\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\"><font color=\"#0000cc\" style=\"word-wrap: break-word;\">深入理解php之函数</font></a>), 也是以zend_op_array为最终载体, 所以和普通函数一样, 方法也是不区分大小写的, 也是可以附加arg_info的. 而不同的则是, 函数的访问权限则由zend_op_array的fn_flag属性表明.<br style=\"word-wrap: break-word;\" />\r\n       我们知道, 在php内的函数, 都有统一的参数列表(遵守php函数约定开发的前提下),\r\n       <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">#define</font>&nbsp;internal_function_param_passthru<br style=\"word-wrap: break-word;\" />\r\n            ht, return_value, return_value_ptr, this_ptr, return_value_used<br style=\"word-wrap: break-word;\" />\r\n            tsrmls_c</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       在调用方法的时候, this关键字由函数参数中的this_ptr指明, 而对于用户定义的函数, this关键字则有zend vm保证.<br style=\"word-wrap: break-word;\" />\r\n        说到这里, 举个列子:<br style=\"word-wrap: break-word;\" />\r\n        如下代码, 会得到fatal\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &lt;?php</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#96cbfe\" style=\"word-wrap: break-word;\">class</font>&nbsp;foo {</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;public&nbsp;<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">function</font>&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">say</font>() {</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$this</font>&nbsp;= null;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;}</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           }</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           ?&gt;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">//output:</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           php fatal error:&nbsp;&nbsp;cannot re-assign&nbsp;<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$this</font>&nbsp;in **&lt;/span</li>\r\n        </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       这是一个初级的保护措施, 防止this关键字被改写, 难道php就仅仅是做了这个保护? 不然, 让我们绕过这个保护措施看看, 如下:\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &lt;?php</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#96cbfe\" style=\"word-wrap: break-word;\">class</font>&nbsp;foo {</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; public&nbsp;<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$id</font>&nbsp;&nbsp;=&nbsp;<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;laruence&quot;</font>;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp;<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">function</font>&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">say</font>(<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$arr</font>) {</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">extract</font>(<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$arr</font>, extr_overwrite);</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">var_dump</font>(<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$this</font>);</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">var_dump</font>(<font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$this</font>-&gt;id);</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; }</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           }</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$a</font>&nbsp;=&nbsp;<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">new</font>&nbsp;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">foo</font>();</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#c6c5fe\" style=\"word-wrap: break-word;\">$a</font>-&gt;<font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">say</font>(<font color=\"#96cbfe\" style=\"word-wrap: break-word;\">array</font>(<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;this&quot;</font>&nbsp;=&gt; null));&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">//只是未来说明方法名不区分大小写.</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           ?&gt;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">//output:</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           null</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           <font color=\"#ffd2a7\" style=\"word-wrap: break-word;\">string</font>(<font color=\"#ff73fd\" style=\"word-wrap: break-word;\">8</font>)&nbsp;<font color=\"#a8ff60\" style=\"word-wrap: break-word;\">&quot;laruence&quot;&lt;/span</font></li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       可见this关键字, 并不是简单的符号表中的item. 是在语法分析阶段, 就由zend engine保证其正确性的, 并attach在函数的结构体中.<br style=\"word-wrap: break-word;\" />\r\n       <span style=\"word-wrap: break-word; font-weight: 700;\">对象的标准操作</span><br style=\"word-wrap: break-word;\" />\r\n        我们对对象的操作, 比如获取属性, 设置属性, 获取对象的类, 等等, 这些常用的方法, 都是实现在对象的标准方法中的,php5中, 提供了23个标准方法.<br style=\"word-wrap: break-word;\" />\r\n       在zend_object_value中的handlers指针, 就指向类常用操作的方法集合, 默认的, 这个指针指向:\r\n       <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           zend_api<br style=\"word-wrap: break-word;\" />\r\n           zend_object_handlers<br style=\"word-wrap: break-word;\" />\r\n           std_object_handlers = {</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_objects_store_add_ref,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* add_ref */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_objects_store_del_ref,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* del_ref */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_objects_clone_obj,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* clone_obj */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_read_property,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* read_property */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_write_property,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* write_property */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_read_dimension,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* read_dimension */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_write_dimension,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* write_dimension */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_get_property_ptr_ptr,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get_property_ptr_ptr */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; null,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; null,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* set */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_has_property,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* has_property */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_unset_property,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* unset_property */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_has_dimension,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* has_dimension */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_unset_dimension,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* unset_dimension */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_get_properties,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get_properties */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_get_method,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get_method */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; null,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* call_method */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_get_constructor,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get_constructor */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_object_get_class,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get_class_entry */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_object_get_class_name,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* get_class_name */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_compare_objects,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* compare_objects */</font></li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; zend_std_cast_object_tostring,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* cast_object */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           &nbsp; &nbsp; null,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<font color=\"#7c7c7c\" style=\"word-wrap: break-word;\">/* count_elements */</font></li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           };&lt;/span</li>\r\n        </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       默认的, 也是绝大多数的时候, 都是如上的这些标准方法.<br style=\"word-wrap: break-word;\" />\r\n       需要指明的是, _dimension后缀的方法, 指的是通过数组($obj[&#39;name&#39;])方式访问对象的属性.<br style=\"word-wrap: break-word;\" />\r\n       <span style=\"word-wrap: break-word; font-weight: 700;\">魔术方法</span><br style=\"word-wrap: break-word;\" />\r\n       魔术方法定义在class_entry中,\r\n        <ul class=\"litype_1\" style=\"word-wrap: break-word; margin: 0px 0px 0px 14px; padding-right: 0px; padding-left: 0px;\" type=\"1\">\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *constructor;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *destructor;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *clone;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *__get;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *__set;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *__unset;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *__isset;</li>\r\n         <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *__call;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *__tostring;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *serialize_func;</li>\r\n          <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px; list-style: decimal;\">\r\n           union _zend_function *unserialize_func;&lt;/span</li>\r\n       </ul>\r\n       <br style=\"word-wrap: break-word;\" />\r\n       魔术方法没有默认值, 在类定义的时刻指定.<br style=\"word-wrap: break-word;\" />\r\n        对于一些魔术方法, 比如__get/__set是被标准操作发起调用的, 所以如果我们自己编写扩展中定义的类, 如果不使用标准方法, 那么也需要在适当的时机, 主动调用这些魔术方法.<br />\r\n        &nbsp;</td>\r\n   </tr>\r\n </tbody>\r\n</table>\r\n<p>\r\n &nbsp;</p>','1444300955','-1062731039','5','1','488','0','0','0','0',NULL,'0',NULL,'0'), ('5','0','1','深入理解zend sapis(zend sapi internals)','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&middot; 作者:laruence(</span><a href=\"http://www.laruence.com/\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" target=\"_blank\">http://www.laruence.com/)</a><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&middot; 本文地址:&nbsp;</span><a href=\"http://www.laruence.com/2008/08/12/180.html\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" target=\"_blank\">http://www.laruence.com/2008/08/12/180.html</a><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&middot; 转载请注明出处&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;sapi:server abstractionapi，研究过php架构的同学应该知道这个东东的重要性，它提供了一个接口，使得php可以和其他应用进行交互数据。本文不会详细介绍每个php的sapi，只是针对最简单的cgi sapi，来说明sapi的机制。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">首先，我们来看看php的架构图：</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <a href=\"http://www.laruence.com/wp-content/uploads/php-arch.jpg\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" target=\"_blank\"><img alt=\"\" border=\"0\" class=\"zoom\" file=\"http://www.laruence.com/wp-content/uploads/php-arch-293x300.jpg\" height=\"300\" id=\"aimg_n285e\" lazyloaded=\"true\" src=\"http://www.laruence.com/wp-content/uploads/php-arch-293x300.jpg\" style=\"word-wrap: break-word; border: none; cursor: pointer;\" width=\"293\" /></a><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php架构图</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">图1 php architecture</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi提供了一个和外部通信的接口，对于php5.2，默认提供了很多种sapi，常见的给apache的mod_php5，cgi，给iis的isapi，还有shell的cli，本文就从cgi sapi入手，介绍sapi的机制。 虽然cgi简单，但是不用担心，它包含了绝大部分内容，足以让你深刻理解sapi的工作原理。要定义个sapi，首先要定义个sapi_module_struct,&nbsp;&nbsp;查看 php-src/sapi/cgi/cgi_main.c:</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*/</font><br style=\"word-wrap: break-word;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module_struct</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi_sapi_module</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi-fcgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi/fastcgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* pretty name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* pretty name */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_cgi_startup</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* startup */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_module_shutdown_wrapper</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* shutdown */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* activate */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_deactivate</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* deactivate */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_ub_write</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* unbuffered write */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_flush</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* flush */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* get uid */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_getenv</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* getenv */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_error</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* error handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* header handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_send_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* send headers handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* send header handler */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_post</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* read post data */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_cookies</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* read cookies */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_register_variables</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* register server variables */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_log_message</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* log message */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* get request time */</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">standard_sapi_module_properties</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; 这个结构，包含了一些常量，比如name, 这个会在我们调用php_info()的时候被使用。一些初始化，收尾函数，以及一些函数指针，用来告诉zend，如何获取，和输出数据。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1. php_cgi_startup， 当一个应用要调用php的时候，这个函数会被调用，对于cgi来说，它只是简单的调用了php的初始化函数：static</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_cgi_startup</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_module_startup</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_module</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">null</span><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;==&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">failure</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">failure</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">success</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2. php_module_shutdown_wrapper ， 一个对php关闭函数的简单包装。只是简单的调用php_module_shutdown;3.php会在每个request的时候，处理一些初始化，资源分配的事务。这部分就是activate字段要定义的，从上面的结构我们可以看出，对于cgi来说，它并没有提供初始化处理句柄。对于mod_php来说，那就不同了，他要在apache的pool中注册资源析构函数， 申请空间，初始化环境变量，等等等等。4. sapi_cgi_deactivate, 这个是对应与activate的函数，顾名思义，它会提供一个handler, 用来处理收尾工作，对于cgi来说，他只是简单的刷新缓冲区，用以保证用户在zend关闭前得到所有的输出数据：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_deactivate</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_d</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* flush only when sapi was started. the reasons are:<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;1. sapi deactivate is called from two places: module init and request shutdown<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;2. when the first call occurs and the request is not set up, flush fails on<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;fastcgi.<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp; */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_started</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_flush</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">success</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">5. sapi_cgibin_ub_write, 这个hanlder告诉了zend，如何输出数据，对于mod_php来说，这个函数提供了一个向response数据写的接口，而对于cgi来说，只是简单的写到stdout：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">inline</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_single_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">const</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#ifdef php_write_stdout</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">long</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">())</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">long</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_stdout</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#ifdef php_write_stdout</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stdout_fileno</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fwrite</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">min</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">16384</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stdout</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_ub_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">const</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">const</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ptr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&gt;&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_single_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ptr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">!</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_handle_aborted_connection</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">()</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ptr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">remaining</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ret</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">str_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">把真正的写的逻辑剥离出来，就是为了简单实现兼容fastcgi的写方式。&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">6. sapi_cgibin_flush, 这个是提供给zend的刷新缓存的函数句柄，对于cgi来说，只是简单的调用系统提供的fflush;7.null， 这部分用来让zend可以验证一个要执行脚本文件的state，从而判断文件是否据有执行权限等等，cgi没有提供。8. sapi_cgibin_getenv,为zend提供了一个根据name来查找环境变量的接口，对于mod_php5来说，当我们在脚本中调用getenv的时候，就会间接的调用这个句柄。而对于cgi来说，因为他的运行机制和cli很类似，直接调用父级是shell， 所以，只是简单的调用了系统提供的genenv:</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">size_t</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name_len</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* when php is started by mod_fastcgi, no regular environment<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp; is provided to php.&nbsp;&nbsp;it is always sent to php at the start<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp; of a request.&nbsp;&nbsp;so we have to do our own lookup to get env<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp; vars.&nbsp;&nbsp;this could probably be faster somehow.&nbsp;&nbsp;*/</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">())</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name_len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/*&nbsp;&nbsp;if cgi, or fastcgi and not found in fcgi env<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;check the regular environment */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">name</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">9. php_error, 错误处理函数, 到这里，说几句题外话，上次看到php maillist提到的使得php的错误处理机制完全oo化，也就是，改写这个函数句柄，使得每当有错误发生的时候，都throw一个异常。而cgi只是简单的调用了php提供的错误处理函数。10. 这个函数会在我们调用php的header()函数的时候被调用，对于cgi来说，不提供。11. sapi_cgi_send_headers,&nbsp;&nbsp;这个函数会在要真正发送header的时候被调用，一般来说，就是当有任何的输出要发送之前：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_send_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">[</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">]</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend_llist_position</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">no_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;==&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_sent_successfully</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">cgi_nph</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;||&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_response_code</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;!=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">200</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">rfc2616_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&amp;&amp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_status_line</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">snprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">%s</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_status_line</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&gt;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_max_header_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">status: %d</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_response_code</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend_llist_get_first_ex</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">, &amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* prevent crlfcrlf */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">header_len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">header</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">header_len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">h</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_struct</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zend_llist_get_next_ex</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-&gt;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">headers</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">, &amp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">phpwrite_h</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\r\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_header_sent_successfully</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">12. null, 这个用来单独发送每一个header, cgi没有提供 13. sapi_cgi_read_post, 这个句柄指明了如何获取post的数据，如果做过cgi编程的话，我们就知道cgi是从stdin中读取post data的，</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_post</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">=</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">min</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">uint</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">content_length</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_post_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">())</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_read</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">pos</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buffer</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">count_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;-&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&lt;=&nbsp;</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">0</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">break</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tmp_read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">read_bytes</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">14. sapi_cgi_read_cookies, 这个和上面的函数一样，只不过是去获取cookie值：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_read_cookies</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_d</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">return</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgibin_getenv</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">((</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_cookie</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sizeof</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">http_cookie</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">-</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">15. sapi_cgi_register_variables,这个函数给了一个接口，用以给$_server变量中添加变量，对于cgi来说，注册了一个php_self,这样我们就可以在脚本中访问$_server[&#39;php_self&#39;]来获取本次的request_uri：</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">void</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_register_variables</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">zval</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">track_vars_array</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_dc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* in cgi mode, we consider the environment to be a part of the server<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp;&nbsp;* variables<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;&nbsp;*/</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_import_environment_variables</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">track_vars_array</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp;</font><font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* build the special-case php_self variable for the cgi version */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_register_variable</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php_self</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_uri</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;?&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_info</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">.</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request_uri</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;:&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;&quot;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">track_vars_array</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_cc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">16. sapi_cgi_log_message ，用来输出错误信息，对于cgi来说，只是简单的输出到stderr:</span><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">static</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">void</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sapi_cgi_log_message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#if php_fastcgi</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_is_fastcgi</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">()</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&amp;&amp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_logging</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">tsrmls_fetch</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">()</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sg</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">server_context</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">strlen</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">char</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;*</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;=&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">malloc</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">+</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">memcpy</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">memcpy</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;+&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sizeof</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">))</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_write</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">request</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fcgi_stderr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">len</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">+</font><font color=\"maroon\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">free</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">buf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n  &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stderr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">%s</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;<br style=\"word-wrap: break-word;\" />\r\n &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/* ignore return code */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"green\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">else</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#ffa500\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">#endif /* php_fastcgi */</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">fprintf</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">(</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">stderr</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"red\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">%s</font><font color=\"navy\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">\\n</font><font color=\"#8b0000\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&quot;</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">,&nbsp;</font><font color=\"blue\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">message</font><font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">)</font><font color=\"gray\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">;</font><br style=\"word-wrap: break-word;\" />\r\n  <font color=\"olive\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">经过分析，我们已经了解了一个sapi是如何实现的了， 分析过cgi以后，我们也就可以想象mod_php, embed等sapi的实现机制。 ：）</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">今天就到这里， 西班牙和中国加时了，呵呵，中国男篮还不错。。。。。。</span></p>','1444301028','-1062731039','5','0','883','0','0','0','0',NULL,'0',NULL,'0'), ('6','0','1','【架构与优化】从facebook中集思广益，相互学习','<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n 本人才学疏浅，提出这个问题只是为了抛砖引玉，希望大家能在自己擅长的领域里对facebook中可能采用的某个技术或者架构方案或优化方法，做个自己的论述。根据2008年9月1日，腾讯网对facebook的技术运营副总裁<font face=\"宋体\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">jonathan heiliger的访问，我们了解到：</font></font><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（1）facebook自称全球流量第四的网站，每天9000万活跃用户访问facebook的1万台服务器。</font></font></font></font><br style=\"word-wrap: break-word;\" />\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（2）25tb数据（08年12月为28tb），40万名外部开发者支持，开发了2.5万套应用软件。</font></font></font></font><br style=\"word-wrap: break-word;\" />\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（3）<font color=\"#4e2727\" style=\"word-wrap: break-word;\"><font face=\"arial\" style=\"word-wrap: break-word;\">使用lamp（<font color=\"#ff0000\" style=\"word-wrap: break-word;\"><font color=\"#9900ff\" style=\"word-wrap: break-word;\">linux</font>、&nbsp;<font color=\"#0000ff\" style=\"word-wrap: break-word;\">apache</font>、<font color=\"#ff0000\" style=\"word-wrap: break-word;\">&nbsp;mysql</font>、&nbsp;</font><font color=\"#ff00ff\" style=\"word-wrap: break-word;\">php</font>）技术构架；数据库使用mysql；使用memcached缓存sql加速（全球最大的分布式memcached缓存，800多台服务器，光缓存在memcached中数据就达20多tb）；使用apc进行opcode编译缓存。关于php的编译执行如下图所示：</font></font></font></font></font></font></p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n  而facebook的缓存方案如下图所示：<br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#4e2727\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（4）<span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"arial\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word;\">一些后台应用是用python、<font color=\"#000000\" style=\"word-wrap: break-word;\">perl和java，以及一些gcc和boost。</font></span></font></font></span></font></font></font></font></p>\r\n<p>\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">（5）使用svn和git来进行代码管理，并且全部企业内部的软件部署都采用开源程序。</font></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n <font face=\"verdana, helvetica, arial, sans-serif\" style=\"word-wrap: break-word;\"><font face=\"arial\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"verdana, helvetica, arial, sans-serif\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 14px;\">2. 可能会采用的mysql架构与优化</font></font></span></font></font></font><br style=\"word-wrap: break-word;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（1）数据的垂直（无关联数据放置不同数据库服务器）与水平分割（库表散列，如用user_id散列），然后用mysql proxy/spock proxy进行分割表的反向代理。</font></font></span><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（2）合理使用变量，并在本地文件建立散列的映射关系，进一步进行分割。</font></font></font><br style=\"word-wrap: break-word;\" />\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（3）master/slave集群架构，实现读写分离。</font></font></font><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">（4）合理的数据库结构设计，与索引优化</font></font></font></font></p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n <font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（5）其他：索引缓存、联合索引、查询缓存等。</font></font></p>\r\n<p style=\"word-wrap: break-word; margin: 0px; padding: 0px; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 30px; text-indent: 2em;\">\r\n  &nbsp;</p>\r\n<p>\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">3. 可能会采用的系统优化</font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font face=\"宋体\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"2\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\">（1）使用epoll模型</span></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（2）异步i/o</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（3）fastcgi或其他方法实现多进程</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（4）sendfile系统调用增大网络i/o流量</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"verdana\" style=\"word-wrap: break-word;\">4. 可能会采用的web架构或前端技术</font></span></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\"><font color=\"#444444\" style=\"word-wrap: break-word;\">（1）web组件分离，如独立的图片服务器，javascript、css文件、动态脚本的分离。</font></font></font></span></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font size=\"3\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word; font-weight: 700;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\"><font color=\"#444444\" style=\"word-wrap: break-word;\">（2）nginx反向代理（或squid）</font></font></font></span></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（3）多副本负载均衡</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（4）http持久连接与合理利用浏览器缓存，例如背景图偏移量技术，及对css、javascript和视频的</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">5. 一些可能会用也可能不用的压力测试</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><span style=\"word-wrap: break-word;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\"><font color=\"#444444\" style=\"word-wrap: break-word;\">（1）apache的ab进行压力测试</font></font></font></span></font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（2）apache的prefork模式进行多进程切换的压力测试</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><font face=\"宋体\" style=\"word-wrap: break-word;\"><font size=\"2\" style=\"word-wrap: break-word;\">（3）使用nginx为多进程下的cpu与io进行监控</font></font></span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\">linux下的memcached开发，请参看逆雪寒的文章</font></font></font><font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><a href=\"http://bbs.phpchina.com/viewthread.php?tid=48667&amp;highlight=linux%2b%cf%c2%b5%c4%2bmemcached%2b%bf%aa%b7%a2\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://bbs.phpchina.com/viewthread.php?tid=48667&amp;highlight=linux%2b%cf%c2%b5%c4%2bmemcached%2b%bf%aa%b7%a2</a></font></font></font><br style=\"word-wrap: break-word;\" />\r\n  <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\">memcached的分布式缓存机制及相关解决方案请阅读以下网址及相关文章：</font></font></font></font><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font face=\"arial\" style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-size: 14px; line-height: 21px;\"><font size=\"3\" style=\"word-wrap: break-word;\"><font color=\"#000000\" style=\"word-wrap: break-word;\"><font style=\"word-wrap: break-word; font-size: 12px;\"><a href=\"http://tech.idv2.com/2008/07/24/memcached-004/\" style=\"word-wrap: break-word; color: rgb(30, 84, 127);\" target=\"_blank\">http://tech.idv2.com/2008/07/24/memcached-004/</a></font></font></font></font></p>','1444301117','-1062731039','5','6','90','0','0','0','0',NULL,'0',NULL,'0'), ('7','0','1','树操作算法，非递归方法','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">前些日子和一些朋友讨论关于无限分类的算法问题，其中提到了利用php数组进行操作的想法。其实无限分类算法就是树的算法。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">利用数据库存储数据加递归搜索似乎是目前很流行的一种方法，但这种方法的效率低下，并增加了不少数据库的负担。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">我这个算法采用文本方式存储数据，效率应该还可以。由于时间关系，算法是匆匆完成没有经过严格测试就放上来了，大家有兴趣的话就测试一下，找找其中的bug，或改善一下算法的性能。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">提醒一点，如果你的php可利用的内存不到1g，请不要尝试去创建一个具有100万个节点的树。。。:lol:</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">树的操作算法是各种高级数据结构算法的基础，估计不少同学在大学的时候都学烂了，所以我就不必细讲了。现在要讨论的是如何在php这个编程环境里面如果实现该算法最大的性能。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">好吧，我来抛砖引玉。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">因时间关系没有写注释，看不懂的同学可以提问。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">[php]</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&lt;?php</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">/**</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 树操作类</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 利用php数组对树进行构造，删除和遍历等操作，全部遍历采用非递归方法实现，并实现iterator和countable操作。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 该算法可适用与无限分类等相关领域，对于同时操作百万级以上的数据可能需要512m以上的内存支持。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* 利用文本存储数据结构，如果需要数据库存储可继承本类并覆盖loadtree和savetree方法。</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* @copyrihgt&nbsp;</span><a href=\"mailto:sentrychen@hotmail.com\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sentrychen@hotmail.com</a><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">, 2008</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* @author sentrychen&nbsp;</span><a href=\"mailto:sentrychen@hotmail.com\" style=\"word-wrap: break-word; color: rgb(30, 84, 127); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sentrychen@hotmail.com</a><span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&gt;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">* @version $id: tree.php, v 0.0.1 2008/10/01 11:51:25 uw exp $</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">*/</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">class itc_tree implements iterator,countable</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const id = &#39;i&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const pid = &#39;p&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const level =&#39;l&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const data = &#39;d&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const children = &#39;c&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const dfs = &#39;dfs&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; const bfs = &#39;bfs&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_tree = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_filename = &#39;&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_prefix = &#39;tree_&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_path = &#39;&#39;;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_rootid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_lastid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_way = self::dfs;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected $_stack = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function __construct($name, $path = &#39;&#39;)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;loadtree($name, $path);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function loadtree ($name, $path = &#39;&#39;)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($path != &#39;&#39;) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (is_dir($path)) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $this-&gt;_path = rtrim($path, &#39;/\\\\&#39;) . directory_separator;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;} else {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; die(&#39;no such directory :&#39; . $path);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$name = md5($name);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_filename = $this-&gt;_path . $this-&gt;_prefix . $name ;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (is_file($this-&gt;_filename)) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree = json_decode(file_get_contents($this-&gt;_filename),true);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_inittree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected function _inittree ()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ary = $this-&gt;listtotree($this-&gt;_tree);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_rootid = $ary[&#39;topid&#39;];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_lastid = $ary[&#39;lastid&#39;];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$this-&gt;_rootid][self::level] = 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function listtotree(&amp;$list){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return = array(&#39;topid&#39;=&gt;0,&#39;lastid&#39;=&gt;0);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;foreach ($list as $id =&gt; &amp;$node){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if (isset($list[$node[self::pid]]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$list[$node[self::pid]][self::children][$id] = &amp;$node;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return[&#39;topid&#39;] = $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if ($id &gt; $return[&#39;lastid&#39;]) $return[&#39;lastid&#39;] = $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $return;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function settreebylist (array $list)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!$this-&gt;_checklist($list)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;die(&#39;incorrect data format&#39;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree = $list;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_inittree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function gettree($id = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null === $id) $id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getparent($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]) &amp;&amp; isset($this-&gt;_tree[$this-&gt;_tree[$id][self::parent]])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$this-&gt;_tree[$id][self::parent]];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getparentsid($start,$level = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$parent = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = $start;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (!isset($this-&gt;_tree[$id])) break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$pid = $this-&gt;_tree[$id][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (null !== $level &amp;&amp; !$level--) break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (!isset($this-&gt;_tree[$pid])) break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;while(true);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $parent;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getchildren($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id][self::children];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function gettreeall()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_tree;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function gettreelist()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree)) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;tolist($this-&gt;_tree);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function tolist($tree){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ary = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;foreach ($tree as $id =&gt; $node){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unset($node[self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$ary[$id] = $node;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $ary;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getdepth(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$depth = 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$i = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id][self::level]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$id][self::level] = 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = $stack[$i++];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$pid = $this-&gt;_tree[$id][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$stack = array_merge($stack,array_keys($this-&gt;_tree[$id][self::children]));&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::level])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $level = $this-&gt;_tree[$id][self::level];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $level = $this-&gt;_tree[$pid][self::level] + 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $this-&gt;_tree[$id][self::level] = $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($depth &lt; $level) $depth = $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(isset($stack[$i]));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $depth;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getlastid(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getrootid(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getroot(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_tree[$this-&gt;_rootid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getdata($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id][self::data];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function setdata($id,$data){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$id][self::data] = $data;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function addroot($data = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$root = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::id =&gt; $this-&gt;_rootid,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::pid =&gt; $this-&gt;_rootid - 1,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::level =&gt; 1,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::data =&gt; $data</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$this-&gt;_rootid] = &amp;$root;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_lastid = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function addleaf($pid,$data = null)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$pid])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$this-&gt;_rootid]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $pid = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $this-&gt;_lastid = $this-&gt;addroot($data);&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; return $this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = ++$this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$level = isset($this-&gt;_tree[$pid][self::level])? $this-&gt;_tree[$pid][self::level] + 1 : null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$id] = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::id =&gt; $id,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::pid =&gt; $pid,&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::level =&gt; $level,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;self::data =&gt; $data</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree[$pid][self::children][$id] = &amp;$this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function insertchild($pid, $children)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$pid])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($children instanceof self){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$children = $children-&gt;gettree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (is_array($children)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $children = $this-&gt;tolist($children);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$lastid = $this-&gt;_lastid + 1;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$list = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;foreach ($children as $id =&gt; $node){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $node[self::id] +=$lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $node[self::pid] +=$lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $list[$id + $lastid] = $node;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$ary = $this-&gt;listtotree($list);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_lastid = $ary[&#39;lastid&#39;];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$list[$ary[&#39;topid&#39;]][self::pid] = $pid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree += $list;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$pid][self::children][$ary[&#39;topid&#39;]] = &amp;$this-&gt;_tree[$ary[&#39;topid&#39;]];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_lastid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this-&gt;addleaf($pid,$children);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function deletechild($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$pid = $this-&gt;_tree[$id][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$deltree = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$pid])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unset($this-&gt;_tree[$pid][self::children][$id]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = array_pop($stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$id][self::children]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $stack =array_merge($stack, array_keys($this-&gt;_tree[$id][self::children]));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$deltree[$id] = $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unset($this-&gt;_tree[$id]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(!empty($stack));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $deltree;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function emptytree(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_tree = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_rootid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;_lastid = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function destroytree(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$this-&gt;emptytree();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (is_file($this-&gt;_filename))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;unlink($this-&gt;_filename);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; protected function _checklist (array $list)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ischecked = true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$topnum = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;foreach ($list as $id =&gt; $node) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (! isset($node[self::id]) || ! isset($node[self::pid]) || $node[self::id] != $id) {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $ischecked = false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}else{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if (!isset($list[$node[self::pid]])) $topnum++;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; if ($topnum &gt; 1){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$ischecked = false;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $ischecked;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function getlevel($id){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]) &amp;&amp; isset($this-&gt;_tree[$id][self::level]) )</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id][self::level];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$level = 0;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id2 = $id;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;while(isset($this-&gt;_tree[$id2])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$id2][self::level])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $level += $this-&gt;_tree[$id2][self::level];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; break;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$level++;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id2 = $this-&gt;_tree[$id2][self::pid];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_tree[$id][self::level] = $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $level;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function dfs($callback = null,$id = null){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null === $id) $id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null == $callback || !function_exists($callback)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = array_shift($stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$children = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$children = array_keys($this-&gt;_tree[$id][self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$stack = array_merge($children,$stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$args = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::id =&gt; $id,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::pid =&gt; $this-&gt;_tree[$id][self::pid],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::data =&gt; &amp;$this-&gt;_tree[$id][self::data],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::level =&gt; $this-&gt;getlevel($id),</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::children =&gt; $children</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$back = call_user_func($callback,$args);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($back)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (is_string($back)) $return .= $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_array($back)) $return[] = $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_int($back)) $return += $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_bool($back) &amp;&amp; $back) $return = $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(!empty($stack));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $return;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function bfs($callback = null,$id = null){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null === $id) $id = $this-&gt;_rootid;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (!isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (null == $callback || !function_exists($callback)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$callback = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$stack = array($id);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$return = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;do{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$id = array_shift($stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$children = null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $children = array_keys($this-&gt;_tree[$id][self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; $stack = array_merge($stack,$children);&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$args = array(</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::id =&gt; $id,</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::pid =&gt; $this-&gt;_tree[$id][self::pid],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::data =&gt; &amp;$this-&gt;_tree[$id][self::data],</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::level =&gt; $this-&gt;getlevel($id),</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; self::children =&gt; $children</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$return = call_user_func($callback,$args);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (isset($back)){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if (is_string($back)) $return .= $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_array($back)) $return[] = $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_int($back)) $return += $back;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else if (is_bool($back) &amp;&amp; $back) $return = $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}while(!empty($stack));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $return;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function savetree(){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;file_put_contents($this-&gt;_filename, json_encode($this-&gt;tolist($this-&gt;_tree)));</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return true;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function setway($way = self::dfs){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (in_array($way,array(self::dfs,self::bfs))){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_way = $way;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;rewind();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function rewind()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$this-&gt;_rootid]))</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array($this-&gt;_rootid);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else{</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array();</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return $this;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function next()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = array_shift($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id][self::children])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$children = array_keys($this-&gt;_tree[$id][self::children]);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if ($this-&gt;_way == self::bfs)</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array_merge($this-&gt;_stack,$children);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;$this-&gt;_stack = array_merge($children,$this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function count()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return count($this-&gt;_tree);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function key()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return current($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function current()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;$id = current($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if (isset($this-&gt;_tree[$id])){</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return $this-&gt;_tree[$id];</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;else</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;return null;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp;</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; public function valid()</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; {</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return !empty($this-&gt;_stack);</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; }</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">[/php]</span></p>','1444301167','-1062731039','5','4','411','1','1','0','5',NULL,'1','red','0'), ('8','0','1','关于php你可能不知道的－php的事件驱动化设计','<p>\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">最近在做一个需要用到异步php的项目， 翻阅php源码的时候，发现了三个没有用过的模块，sysvsem,sysvshm,sysvmsg,一番研究以后，受益非浅。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">在php中有这么一族函数，他们是对unix的v ipc函数族的包装。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">它们很少被人们用到，但是它们却很强大。巧妙的运用它们，可以让你事倍功半。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">它们包括：</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">信号量(semaphores)</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">共享内存(shared memory)</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">进程间通信(inter-process messaging, ipc)</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">基于这些，我们完全有可能将php包装成一基于消息驱动的系统。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">但是，首先，我们需要介绍几个重要的基础:</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">1. ftok</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_yc8\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">int ftok ( string pathname, string proj )</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">//ftok将一个路径名pathname和一个项目名(必须为一个字符), 转化成一个整形的用来使用系统v ipc的key</font></li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2. ticks</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">ticks是从php 4.0.3开始才加入到php中的，它是一个在declare代码段中解释器每执行n条低级语句就会发生的事件。n的值是在declare中的directive部分用ticks=n来指定的。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n &nbsp;</p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_tni\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function getstatus($arg){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r connection_status();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;debug_print_backtrace();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">reigster_tick_function(&quot;getstatus&quot;, true);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=1){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;for($i =1; $i&lt;999; $i++){</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;echo &quot;hello&quot;;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp;&nbsp;}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">unregister_tick_function(&quot;getstatus&quot;);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">这个就基本相当于：</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n <div id=\"code_s5l\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function getstatus($arg){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r connection_status();&nbsp;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">debug_print_backtrace();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">reigster_tick_function(&quot;getstatus&quot;, true);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=1){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">for($i =1; $i&lt;999; $i++){</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">echo &quot;hello&quot;; getstatus(true);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">unregister_tick_function(&quot;getstatus&quot;);</font></li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">消息，我现在用一个例子来说明，如何结合ticks来实现php的消息通信。</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_ih5\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$mesg_key = ftok(__file__, &#39;m&#39;);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$mesg_id = msg_get_queue($mesg_key, 0666);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function fetchmessage($mesg_id){</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if(!is_resource($mesg_id)){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r(&quot;mesg queue is not ready&quot;);&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if(msg_receive($mesg_id, 0, $mesg_type, 1024, $mesg, false, msg_ipc_nowait)){&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">print_r(&quot;process got a new incoming msg: $mesg &quot;);&nbsp;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">register_tick_function(&quot;fetchmessage&quot;, $mesg_id);&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=2){&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$i = 0;&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">while(++$i &lt; 100){&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if($i%5 == 0){&nbsp;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">msg_send($mesg_id, 1, &quot;hi: now index is :&quot;. $i);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">//msg_remove_queue($mesg_id);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">在这个例子中，首先将我们的php执行process加入到一个由ftok生成的key所获得的消息队列中。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">然后，通过ticks，没隔俩个语句，就去查询一次消息队列。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">然后模拟了消息发送。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">在浏览器访问这个脚本，结果如下：</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n  <div id=\"code_yb2\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:19:&quot;hi: now index is :5&quot;;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :10&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :15&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :20&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :25&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :30&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :35&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :40&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :45&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :50&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :55&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :60&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :65&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :70&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :75&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :80&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :85&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :90&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">process got a new incoming msg: s:20:&quot;hi: now index is :95&quot;;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">看到这里是不是，大家已经对怎么模拟php为事件驱动已经有了一个概念了？ 别急，我们继续完善。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">2. 信号量</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">信号量的概念，大家应该都很熟悉。通过信号量，可以实现进程通信，竞争等。 再次就不赘述了，只是简单的列出php中提供的信号量函数集。</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n <div id=\"code_xt5\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_acquire -- acquire a semaphore</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_get -- get a semaphore id</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_release -- release a semaphore</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">sem_remove -- remove a semaphore</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">具体信息，可以翻阅php手册。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">3. 内存共享</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">php sysvshm提供了一个内存共享方案:sysvshm，它是和sysvsem,sysvmsg一个系列的，但在此处，我并没有使用它，我使用的shmop系列函数，结合ticks</font></p>\r\n<div class=\"blockcode\" style=\"word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); background: url(http://bbs.phpchina.com/template/yeei_dream1/css/yeei//codebg.gif) 0px 0px repeat-y rgb(247, 247, 247);\">\r\n <div id=\"code_qxu\" style=\"word-wrap: break-word;\">\r\n    <ol style=\"word-wrap: break-word; margin: 0px 0px 0px 10px !important; padding-right: 0px !important; padding-left: 0px !important;\">\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&lt;?php</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">function memoryusage(){ &nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;%s: %s&lt;br/&gt;&quot;, date(&quot;h:i:s&quot;, $now), memory_get_usage());</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; //var_dump(debug_backtrace());</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; //var_dump(__function__);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; //debug_print_backtrace();</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">register_tick_function(&quot;memoryusage&quot;);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">declare(ticks=1){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $shm_key = ftok(__file__, &#39;s&#39;);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; $shm_id = shmop_open($shm_key, &#39;c&#39;, 0644, 100);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">printf(&quot;size of shared memory is: %s&lt;br/&gt;&quot;, shmop_size($shm_id));</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$shm_text = shmop_read($shm_id, 0, 100);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">eval($shm_text);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">if(!empty($share_array)){</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; var_dump($share_array);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; $share_array[&#39;id&#39;] += 1;</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}else{</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">&nbsp; &nbsp; &nbsp; &nbsp; $share_array = array(&#39;id&#39; =&gt; 1);</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">}&nbsp;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$out_put_str = &quot;$share_array = &quot; . var_export($share_array, true) .&quot;;&quot;;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$out_put_str = str_pad($out_put_str, 100, &quot; &quot;, str_pad_right);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">shmop_write($shm_id, $out_put_str, 0);</font></li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n     <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">?&gt;</font></li>\r\n      <li style=\"word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: monaco, consolas, \'lucida console\', \'courier new\', serif; line-height: 1.8em;\">\r\n       &nbsp;</li>\r\n   </ol>\r\n </div>\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\"><span style=\"word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(30, 84, 127) !important;\">复制代码</span></font></div>\r\n<p>\r\n  <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">运行这个例子，不断刷新，我们可以看到index在递增。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word;\" />\r\n <br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <font color=\"#444444\" style=\"word-wrap: break-word; font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">单单使用这个shmop就能完成一下，php脚本之间共享数据的功能：以及，比如缓存，计数等等。</font><br style=\"word-wrap: break-word; color: rgb(0, 255, 0); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  &nbsp;</p>','1444301218','-1062731039','5','10','633','1','1','0','10',NULL,'0','red','0'), ('9','0','1','本论坛超管的账号、密码都为admin','<p>\r\n 操作步骤：</p>\r\n<p>\r\n  1 先登陆到会员中心；</p>\r\n<p>\r\n  2 点击右上角&ldquo;管理中心&rdquo;再次登陆，即可进入后台操作界面；</p>','1444301395','-1062731039','5','14','537','1','1','0','0',NULL,'1','red','0'), ('78',NULL,'46','','','1560860778','1928469057','5','0','368','0','0','0','0',NULL,'0',NULL,'0'), ('79',NULL,'46','','','1560860793','1928469057','5','0','362','0','0','0','0',NULL,'0',NULL,'0'), ('80',NULL,'52','算是','','1560864119','1875253314','5','2','30','0','0','0','0',NULL,'0',NULL,'0'), ('82',NULL,'24','额鹅鹅鹅','<p>\r\n	鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿</p>','1560869057','1875253314','5','0','364','0','0','0','1',NULL,'0',NULL,'0'), ('83',NULL,'58','但是','<p>\r\n	阿斯顿发</p>','1560874706','2147483647','7','0','587','0','0','0','1',NULL,'0',NULL,'0'), ('85',NULL,'10','晚上好','<p>\r\n	试试效果咋样</p>','1560880720','2071338726','5','0','298','0','0','0','30',NULL,'0',NULL,'0'), ('77',NULL,'46','','','1560860745','1928469057','5','0','233','0','0','0','0',NULL,'0',NULL,'0'), ('76',NULL,'46','','','1560860733','1928469057','5','0','427','0','0','0','0',NULL,'0',NULL,'0'), ('22',NULL,'21','','','1560159060','1928748306','5','1','36','0','0','0','0',NULL,'0',NULL,'0'), ('24',NULL,'21','','','1560164392','1928748306','5','0','439','0','0','0','0',NULL,'1',NULL,'0'), ('25',NULL,'10','','','1560164699','1928748306','5','0','337','0','0','0','0',NULL,'1',NULL,'0'), ('552',NULL,'205','www','<p>\r\n	123456</p>','1567838890','1929035131','9','0','119','0','0','0','0',NULL,'0',NULL,'0'), ('31',NULL,'10','sfsdfsdfsd','<p>\r\n	sdfsdfsdfsd</p>','1560223057','2071609571','5','0','469','0','0','0','0',NULL,'0',NULL,'0'), ('33',NULL,'10','','','1560345545','2071609571','5','0','338','0','0','0','0',NULL,'1',NULL,'0'), ('36',NULL,'24','','<ol>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">nijdso;;gkffe</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">lsdkfks&#39;;f</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">dlkfl;ksff</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">lsdkl;fks</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">p[[d[fsp[</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">slf;&#39;s;v&#39;f</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">sdl;ksflw</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">fls;lsflgl1</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">l;faskg;lksjj&#39;</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">fsa、k</span></li>\r\n	<li>\r\n		<span style=\"background-color:#ffff00;\">;,mdkjw[fee</span></li>\r\n</ol>','1560478269','2071609571','5','0','1654','0','0','0','0',NULL,'0',NULL,'0'), ('38',NULL,'27','123','<p>\r\n	123</p>','1560506191','2071610864','5','0','395','0','0','0','0',NULL,'1',NULL,'0'), ('39',NULL,'27','12345','','1560517388','2071610864','5','2','67','0','0','0','0',NULL,'0',NULL,'0'), ('42',NULL,'27','231','<p>\r\n	123</p>','1560526558','1989182368','4','1','912','1','1','0','0',NULL,'0','red','0'), ('44',NULL,'10','','','1560588442','1929132719','5','0','516','0','0','0','0',NULL,'0',NULL,'0'), ('45',NULL,'10','','','1560588452','1929132719','5','0','622','0','0','0','0',NULL,'0',NULL,'0'), ('378',NULL,'135','发帖','<p>\r\n	11111111</p>','1564547963','1928469046','5','1','23','0','0','0','0',NULL,'0',NULL,'0'), ('49',NULL,'42','python','<p>\r\n	python</p>','1560689040','2147483647','5','0','947','0','0','0','0',NULL,'0',NULL,'0'), ('51',NULL,'42','test','<p>\r\n	1111</p>','1560695389','2147483647','5','0','271','0','0','0','0',NULL,'0',NULL,'0'), ('52',NULL,'27','123','<p>\r\n	123</p>','1560702188','2071790425','3','0','244','0','1','0','0',NULL,'1',NULL,'0'), ('56',NULL,'27','231231','<p>\r\n	2321323213</p>','1560765338','1929035499','5','0','401','0','0','0','0',NULL,'0',NULL,'0'), ('57',NULL,'27','da\'s\'da\'s\'d','<p>\r\n	奥术大师多</p>','1560765353','1929035499','5','0','737','0','0','0','0',NULL,'0',NULL,'0'), ('395',NULL,'10','测试发帖1','<p>\r\n	测试发帖1测试发帖1测试发帖1测试发帖1测试发帖1测试发帖1测试发帖1</p>','1564560749','1875253314','5','2','37','0','0','0','1',NULL,'0',NULL,'0'), ('393',NULL,'139','ddd','<p>\r\n	ddd</p>','1564559709','1929132324','5','0','168','0','0','0','0',NULL,'0',NULL,'0'), ('392',NULL,'121','嘿嘿嘿','<p>\r\n	测试一下</p>\r\n<p>\r\n	皮卡丘！</p>','1564559705','1929132324','5','0','130','0','0','0','0',NULL,'0',NULL,'0'), ('61',NULL,'26','','','1560770498','1929035499','5','0','3','0','0','0','0',NULL,'1',NULL,'0'), ('62',NULL,'26','','','1560770525','1929035499','5','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('63',NULL,'26','','','1560770533','1929035499','5','1','5','0','0','0','0',NULL,'1',NULL,'0'), ('65',NULL,'26','','','1560770554','1929035499','5','0','3','0','0','0','0',NULL,'1',NULL,'0'), ('66',NULL,'26','','','1560771392','1929035499','5','0','7','0','0','0','0',NULL,'1',NULL,'0'), ('67',NULL,'53','','','1560771630','1929035499','5','0','15','0','0','0','0',NULL,'1',NULL,'0'), ('69',NULL,'19','1111','<p>\r\n	111111</p>','1560773285','1929035499','3','0','40','0','0','0','0',NULL,'1',NULL,'0'), ('71',NULL,'10','xixixi','<p>\r\n	xixixi</p>','1560780594','1929132719','5','0','43','0','0','0','0',NULL,'1',NULL,'0'), ('72',NULL,'24','嗯嗯','<p>\r\n	沃尔沃若无</p>','1560781816','1929132719','5','0','10','0','0','0','1',NULL,'1',NULL,'0'), ('73',NULL,'24','我认为','<p>\r\n	人热污染无绕弯儿</p>','1560781864','1929132719','5','0','393','0','0','0','0',NULL,'1',NULL,'0'), ('74',NULL,'24','问答热无','<p>\r\n	二道湾群多群</p>','1560781997','1929132719','5','0','362','0','0','0','0',NULL,'0',NULL,'0'), ('75',NULL,'52','啊啊啊','<p>\r\n	啊啊啊啊</p>','1560817237','2147483647','5','0','393','0','0','0','0',NULL,'0',NULL,'0'), ('87',NULL,'10','sfds','<p>\r\n	asfshgdrjhgfjhgkughkj</p>','1560911715','1928469057','5','0','430','0','0','0','22',NULL,'0',NULL,'0'), ('88',NULL,'52','123456','<p>\r\n	1234567</p>','1560912906','1875253314','5','0','9','0','1','0','0',NULL,'1',NULL,'0'), ('89',NULL,'10','sfads','<p>\r\n	asdgdfshdjhkghf</p>','1560914237','1928469057','5','11','260','1','1','0','30',NULL,'1','red','0'), ('90',NULL,'10','python','<p>\r\n	007</p>','1560915068','1875253314','5','16','203','1','1','0','0',NULL,'1','red','0'), ('91',NULL,'10','','','1560915739','1928469057','5','0','299','0','0','0','0',NULL,'0',NULL,'0'), ('94',NULL,'10','123','<p>\r\n	123</p>','1560916455','1928469057','5','3','102','0','1','0','0',NULL,'0','red','0'), ('93',NULL,'10','123','<p>\r\n	23</p>','1560916341','1928469057','5','0','403','0','0','0','0',NULL,'0',NULL,'0'), ('95',NULL,'10','nbv','<p>\r\n	nbv</p>','1560923679','1928469057','5','0','9','0','0','0','0',NULL,'1',NULL,'0'), ('96',NULL,'24','','','1560926256','1875253314','5','0','341','0','0','0','0',NULL,'0',NULL,'0'), ('97',NULL,'24','','','1560926297','1875253314','5','0','452','0','0','0','0',NULL,'0',NULL,'0'), ('98',NULL,'24','','','1560926337','1875253314','5','0','782','0','0','0','0',NULL,'0',NULL,'0'), ('99',NULL,'10','1111','<p>\r\n	1111</p>','1560928759','1928469057','7','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('100',NULL,'10','22222','<p>\r\n	2222</p>','1560928966','1928469057','7','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('101',NULL,'10','','','1560930165','1928469057','7','0','500','0','0','0','0',NULL,'0',NULL,'0'), ('102',NULL,'65','aaaa','<p>\r\n	aaaaaaaaaaaaaaaaaaaaaa</p>','1560931158','1875253314','5','10','57','1','0','0','0',NULL,'1',NULL,'0'), ('109',NULL,'10','','','1560933182','1928469057','5','0','385','0','0','0','0',NULL,'0',NULL,'0'), ('110',NULL,'10','','','1560933220','1928469057','5','0','429','0','0','0','0',NULL,'0','red','0'), ('119',NULL,'22','github-bbs论坛源码','<p>\r\n	想啥呢！赶紧敲代码去吧！</p>','1560944082','1928469057','7','2','432','1','1','0','30',NULL,'1','red','0'), ('123',NULL,'10','456','<p>\r\n	466</p>','1560949116','1875253314','3','3','165','1','1','0','0',NULL,'1',NULL,'0'), ('130',NULL,'65','12345','<p>\r\n	12345</p>','1560953095','1875253314','6','1','30','1','1','0','0',NULL,'1','red','0'), ('132',NULL,'10','日常发帖','<p>\r\n	红豆生南国,春来发几枝</p>','1560953385','1928469057','3','0','325','0','0','0','10',NULL,'1',NULL,'0'), ('142',NULL,'62','wewgfd','<p>\r\n	fdsdbfsdffd</p>','1561000011','1928469057','3','0','332','1','1','0','0',NULL,'1','red','0'), ('143',NULL,'62','','','1561001904','1928469057','5','0','370','0','0','0','0',NULL,'0',NULL,'0'), ('144',NULL,'62','','','1561001920','1928469057','5','0','561','0','0','0','0',NULL,'0',NULL,'0'), ('145',NULL,'46','aaa','<p>\r\n	aaaaaaa</p>','1561002610','1928469057','5','0','351','0','0','0','0',NULL,'0',NULL,'0'), ('146',NULL,'46','aaa','<p>\r\n	aaaaaa</p>','1561002637','1928469057','5','5','101','1','1','0','0',NULL,'1','red','0'), ('148',NULL,'10','','','1561011216','1928469057','5','0','361','0','0','0','0',NULL,'0',NULL,'0'), ('150',NULL,'64','','','1561011878','1928469057','5','0','359','0','0','0','0',NULL,'0',NULL,'0'), ('151',NULL,'21','111','<p>\r\n	222</p>','1561012296','1928469057','5','0','388','0','0','0','2',NULL,'0',NULL,'0'), ('152',NULL,'21','222','<p>\r\n	222</p>','1561012329','1928469057','5','0','390','0','0','0','0',NULL,'0',NULL,'0'), ('153',NULL,'21','222','<p>\r\n	222</p>','1561012335','1928469057','5','0','383','0','0','0','0',NULL,'0',NULL,'0'), ('154',NULL,'21','111','<p>\r\n	111</p>','1561012385','1928469057','5','0','381','0','0','0','0',NULL,'0',NULL,'0'), ('155',NULL,'21','111','<p>\r\n	111</p>','1561012428','1928469057','5','0','404','0','0','0','0',NULL,'0',NULL,'0'), ('156',NULL,'21','321','<p>\r\n	123</p>','1561012467','1928469057','3','0','286','0','0','0','0',NULL,'1',NULL,'0'), ('157',NULL,'21','321','<p>\r\n	123</p>','1561012472','1928469057','3','0','304','0','0','0','0',NULL,'1',NULL,'0'), ('159',NULL,'21','111','<p>\r\n	111</p>','1561013130','1928469057','3','0','316','0','0','0','0',NULL,'1',NULL,'0'), ('162',NULL,'10','add','<p>\r\n	add</p>','1561013528','1928469057','5','0','364','0','0','0','1',NULL,'0',NULL,'0'), ('163',NULL,'10','','','1561013554','1928469057','5','0','353','0','0','0','0',NULL,'0',NULL,'0'), ('164',NULL,'10','','','1561014042','1875253314','5','0','621','0','0','0','0',NULL,'0',NULL,'0'), ('165',NULL,'10','','','1561014068','1875253314','5','2','31','0','0','0','0',NULL,'0',NULL,'0'), ('168',NULL,'10','','','1561014270','1928469057','5','0','349','0','0','0','0',NULL,'0',NULL,'0'), ('170',NULL,'10','dfdf','<p>\r\n	dfdfdf</p>','1561015490','1928469057','5','0','331','0','0','0','0',NULL,'0',NULL,'0'), ('171',NULL,'21','lll','<p>\r\n	lll</p>','1561018570','1928469057','5','0','369','0','0','0','0',NULL,'0',NULL,'0'), ('172',NULL,'69','老罗','<p>\r\n	分红是对方；三个；时刻发生法律；沙发你；tertiary；热干面儿童；人、他&lsquo; 我怕； 发；g的高频头那我就买来了&nbsp;</p>','1561018653','1875253314','5','0','389','0','0','0','0',NULL,'0',NULL,'0'), ('173',NULL,'21','','','1561018804','1928469057','5','0','358','0','0','0','0',NULL,'0',NULL,'0'), ('174',NULL,'21','','','1561018868','1928469057','5','0','374','0','0','0','0',NULL,'0',NULL,'0'), ('175',NULL,'21','','','1561020410','1928469057','5','0','395','0','0','0','0',NULL,'0',NULL,'0'), ('176',NULL,'21','','','1561020752','1928469057','5','0','413','0','0','0','0',NULL,'0',NULL,'0'), ('177',NULL,'21','','','1561020758','1928469057','5','0','1336','0','0','0','0',NULL,'0',NULL,'0'), ('178',NULL,'21','','','1561021380','1928469057','5','0','1087','0','0','0','0',NULL,'0',NULL,'0');
INSERT INTO `bbs_post` VALUES ('396',NULL,'10','222','<p>\r\n	2222</p>','1564561031','1875253314','9','0','261','0','0','0','0',NULL,'0',NULL,'0'), ('183',NULL,'21','去去去','<p>\r\n	qq</p>','1561031638','1928469057','5','0','13','0','0','0','0',NULL,'1',NULL,'0'), ('184',NULL,'37','123','','1561033706','1928469057','5','0','5','0','0','0','0',NULL,'1',NULL,'0'), ('185',NULL,'10','','','1561033799','1928469057','5','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('186',NULL,'10','','','1561037213','1928469057','3','0','331','0','0','0','0',NULL,'1',NULL,'0'), ('187',NULL,'10','','','1561038887','1928469057','5','0','477','0','0','0','0',NULL,'0',NULL,'0'), ('189',NULL,'10','','','1561078733','1928469057','9','0','258','0','0','0','0',NULL,'1',NULL,'0'), ('190',NULL,'21','12345','<p>\r\n	上山打老虎</p>','1561079017','1928469057','4','3','105','0','0','0','0',NULL,'0',NULL,'0'), ('197',NULL,'21','11111111111111','<p>\r\n	111111111111111111111111</p>','1561084248','1928469057','4','1','481','0','0','0','0',NULL,'0',NULL,'0'), ('198',NULL,'34','123','','1561086055','1875253314','5','1','48','0','0','0','0',NULL,'0','red','0'), ('199',NULL,'34','123','','1561086108','1875253314','5','0','12','0','0','0','0',NULL,'1','red','0'), ('200',NULL,'34','123','','1561086123','1875253314','5','1','50','0','0','0','0',NULL,'0','red','0'), ('201',NULL,'34','123','','1561086443','1928469057','5','0','491','0','0','0','0',NULL,'0','red','0'), ('204',NULL,'21','55555555','<p>\r\n	5555555555555555</p>','1561087629','1928469057','4','1','383','0','0','0','0',NULL,'0',NULL,'0'), ('205',NULL,'21','111111111','<p>\r\n	22222222222222</p>','1561087752','1928469057','4','3','72','0','0','0','0',NULL,'0',NULL,'0'), ('208',NULL,'24','鹅鹅鹅鹅鹅鹅饿鹅鹅鹅饿','<p>\r\n	呃呃呃呃呃呃呃呃呃鹅鹅鹅鹅鹅鹅饿</p>','1561094671','1875253314','5','3','37','0','1','0','0',NULL,'1',NULL,'0'), ('549',NULL,'205','hhh','<p>\r\n	123456</p>','1567838178','1929035131','9','0','213','0','0','0','0',NULL,'0',NULL,'0'), ('548',NULL,'10','测试','测试内容','1567824312','1929035131','13','0','12','0','0','0','0',NULL,'1',NULL,'0'), ('547',NULL,'10','title','content','1567820753','1929035131','13','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('546',NULL,'10','title','<p>\r\n	content</p>','1567820708','1929035131','13','0','3','0','0','0','0',NULL,'1',NULL,'0'), ('545',NULL,'10','title','<p>\r\n	content</p>','1567820656','1929035131','13','0','4','0','0','0','0',NULL,'1',NULL,'0'), ('231',NULL,'75','测试下发帖','<p>\r\n	测试下发帖</p>','1563874460','1928668075','5','0','332','0','0','0','0',NULL,'0',NULL,'0'), ('232',NULL,'76','测试付费','','1563875426','1928668075','5','3','74','0','0','0','2',NULL,'0',NULL,'0'), ('233',NULL,'10','fff','<p>\r\n	hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh</p>','1563875439','1928668384','5','1','48','0','0','0','0',NULL,'0',NULL,'0'), ('544',NULL,'10','','<p>\r\n	gngngn</p>','1567778929','1033225540','9','0','205','0','0','0','0',NULL,'0',NULL,'0'), ('241',NULL,'80','试试','<p>\r\n	试试效果</p>','1563875770','1928668075','5','2','61','0','0','0','20',NULL,'0',NULL,'0'), ('244',NULL,'79','发帖是否有金币','<p>\r\n	发帖是否有金币？</p>\r\n<p>\r\n	&nbsp;</p>','1563875908','1928668384','4','0','96','1','1','0','0',NULL,'1','red','0'), ('247',NULL,'75','在吗','<p>\r\n	在吗</p>','1563884149','1928669902','5','2','49','0','0','0','0',NULL,'0',NULL,'0'), ('248',NULL,'10','','','1563884273','1928668384','9','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('249',NULL,'10','qwertyuio','<p>\r\n	wertyuil;&#39;</p>\r\n<p>\r\n	&#39;/;,khgfdeswaq</p>','1563885816','1928668384','5','0','184','0','0','0','22',NULL,'1',NULL,'0'), ('412',NULL,'96','123','<p>\r\n	234</p>','1564580766','1875253314','9','0','44','0','0','0','0',NULL,'1',NULL,'0'), ('543',NULL,'10','s\'s\'s\'s','<p>\r\n	22s&#39;s&#39;s&#39;s</p>','1567762470','1929035131','9','0','163','0','0','0','2',NULL,'0',NULL,'0'), ('542',NULL,'194','这是一个title','<p>\r\n	这是一个帖子内容</p>','1567755832','1929035131','7','2','30308','0','0','0','0',NULL,'0',NULL,'0'), ('538',NULL,'10','','','1567741456','1033225540','9','0','155','0','0','0','0',NULL,'0',NULL,'0'), ('259',NULL,'10','ggrdth','<p>\r\n	rghbdthtyhty</p>','1564050740','1928469046','5','0','277','0','0','0','2',NULL,'0',NULL,'0'), ('260',NULL,'10','我的帖子呢','<p>\r\n	我写的帖子哪里去了</p>','1564063755','1928469046','5','0','238','0','0','0','2',NULL,'0',NULL,'0'), ('399',NULL,'10','','','1564565374','1875253314','5','0','161','0','0','0','0',NULL,'0',NULL,'0'), ('400',NULL,'10','','','1564565576','1875253314','5','0','299','0','0','0','0',NULL,'0',NULL,'0'), ('401',NULL,'96','好','<p>\r\n	测试</p>','1564573589','1875253314','9','2','158','0','0','0','0',NULL,'0',NULL,'0'), ('402',NULL,'75','xinfatie','<p>\r\n	shixiahuifu</p>','1564575636','2147483647','3','1','43','0','1','0','0',NULL,'1','red','0'), ('264',NULL,'10','','','1564098438','1928469046','5','0','275','0','0','0','0',NULL,'0',NULL,'0'), ('265',NULL,'10','nihao','<p>\r\n	123456789</p>','1564116582','2147483647','5','0','300','0','1','0','20',NULL,'0',NULL,'0'), ('268',NULL,'79','','','1564136470','1928469046','5','0','208','0','0','0','0',NULL,'0',NULL,'0'), ('269',NULL,'79','','','1564136890','1928469046','5','0','243','0','0','0','0',NULL,'0',NULL,'0'), ('270',NULL,'79','','','1564138100','1928469046','5','0','424','0','0','0','0',NULL,'0',NULL,'0'), ('273',NULL,'10','','','1564140279','1928469046','4','0','359','0','0','0','0',NULL,'0',NULL,'0'), ('278',NULL,'10','test','','1564188712','1928469046','5','24','729','1','1','0','0',NULL,'0','red','0'), ('280',NULL,'96','自学python经验','<p>\r\n	自学？不存在的！</p>','1564189021','1928469046','8','5','259','1','1','0','30',NULL,'0','red','0'), ('408',NULL,'10','测试','<p>\r\n	测试</p>','1564579330','2147483647','5','0','38','0','0','0','0',NULL,'1',NULL,'0'), ('411',NULL,'96','123','<p>\r\n	23</p>','1564580672','1875253314','9','0','234','0','0','0','0',NULL,'0',NULL,'0'), ('409',NULL,'10','test 11','<p>\r\n	test 11</p>','1564579790','1875253314','7','0','226','0','0','0','0',NULL,'0',NULL,'0'), ('410',NULL,'96','sfdf','<p>\r\n	dfa</p>','1564580546','1875253314','9','1','210','0','0','0','0',NULL,'0',NULL,'0'), ('288',NULL,'10','','','1564221644','2147483647','3','0','132','1','1','0','0',NULL,'1','red','0'), ('289',NULL,'90','12312312312312312','<p>\r\n	123123123123123123123</p>','1564225232','1928469046','3','9','71','1','1','0','0',NULL,'1','red','0'), ('294',NULL,'90','12313213213131','<p>\r\n	3123213131</p>','1564228115','1928469046','5','3','27','0','0','0','0',NULL,'0',NULL,'0'), ('413',NULL,'96','123','<p>\r\n	343</p>','1564580783','1875253314','9','11','201','0','0','0','0',NULL,'0',NULL,'0'), ('299',NULL,'10','','','1564285714','2071330862','5','0','188','0','0','0','0',NULL,'0',NULL,'0'), ('300',NULL,'10','test','<p>\r\n	test</p>','1564287794','2071330862','5','0','239','0','0','0','1',NULL,'0',NULL,'0'), ('301',NULL,'10','','','1564287881','2071330862','5','0','763','0','0','0','0',NULL,'0',NULL,'0'), ('302',NULL,'10','','','1564287881','2071330862','5','0','227','0','0','0','0',NULL,'0',NULL,'0'), ('303',NULL,'10','ssss','','1564291610','2071330862','5','0','307','0','0','0','11',NULL,'0',NULL,'0'), ('305',NULL,'84','','','1564292348','2147483647','3','0','132','0','0','0','0',NULL,'1','red','0'), ('310',NULL,'10','试试','<p>\r\n	132</p>','1564361841','1928469046','5','1','14','0','0','0','0',NULL,'0',NULL,'0'), ('313',NULL,'83','sdfsdf','<p>\r\n	sfsf</p>','1564381950','2147483647','5','1','87','0','0','0','0',NULL,'0',NULL,'0'), ('314',NULL,'83','','','1564383522','1928469046','5','0','248','0','0','0','0',NULL,'0',NULL,'0'), ('315',NULL,'10','123','<p>\r\n	123</p>','1564385483','2147483647','5','0','236','0','0','0','0',NULL,'0',NULL,'0'), ('316',NULL,'10','哈哈哈','<p>\r\n	哈哈哈哈哈</p>','1564385518','2147483647','5','0','277','0','0','0','20',NULL,'0',NULL,'0'), ('416',NULL,'79','dfsaf','','1564587102','2071337695','8','0','251','0','0','0','0',NULL,'0',NULL,'0'), ('320',NULL,'106','1213','<p>\r\n	121</p>','1564399922','2147483647','5','0','215','0','0','0','0',NULL,'0',NULL,'0'), ('321',NULL,'10','123456789','<p>\r\n	123456789</p>','1564401554','1928469046','5','1','35','0','0','0','0',NULL,'0','red','0'), ('322',NULL,'10','','','1564403915','1928469046','5','0','848','0','0','0','0',NULL,'0',NULL,'0'), ('324',NULL,'85','','<p>\r\n	内核源码的帖子</p>','1564406608','1928469046','5','0','1012','0','0','0','0',NULL,'0','red','0'), ('327',NULL,'10','测试','<p>\r\n	啊啦啦</p>','1564414533','1928741038','4','1','65','0','0','0','11',NULL,'0',NULL,'0'), ('385',NULL,'10','标题title','<p>\r\n	内容content</p>','1564556548','1928469046','6','3','34','0','0','0','0',NULL,'0',NULL,'0'), ('391',NULL,'121','嘿嘿嘿','<p>\r\n	测试一下</p>\r\n<p>\r\n	皮卡丘！</p>','1564559697','1929132324','5','0','154','0','0','0','0',NULL,'0',NULL,'0'), ('331',NULL,'10','啊','<p>\r\n	&nbsp;啊</p>','1564450922','2147483647','9','1','212','0','1','0','1',NULL,'0',NULL,'0'), ('332',NULL,'10','','','1564462168','1928469046','5','0','549','0','0','0','0',NULL,'0',NULL,'0'), ('333',NULL,'10','','','1564470654','2147483647','5','0','203','0','0','0','0',NULL,'0',NULL,'0'), ('336',NULL,'10','','','1564484301','2147483647','4','0','230','0','0','0','0',NULL,'0',NULL,'0'), ('340',NULL,'119','帖子作者回复回复','<p>\r\n	test&nbsp;</p>','1564484534','1928469046','5','2','37','0','0','0','1',NULL,'0',NULL,'0'), ('343',NULL,'122','','','1564485974','1928469046','9','3','32','0','0','0','0',NULL,'0',NULL,'0'), ('347',NULL,'114','','','1564488582','2147483647','5','0','156','0','0','0','0',NULL,'0',NULL,'0'), ('348',NULL,'103','suuccessful','<p>\r\n	成功就在眼前</p>','1564491235','1928469046','5','0','137','0','0','0','1',NULL,'0',NULL,'0'), ('349',NULL,'103','','','1564491255','1928469046','5','0','131','0','0','0','0',NULL,'0',NULL,'0'), ('350',NULL,'103','','','1564491263','1928469046','5','0','147','0','0','0','0',NULL,'0',NULL,'0'), ('352',NULL,'120','zxcmnv','<p>\r\n	俺看见啥地方好垃圾空格</p>','1564505829','1971847303','5','0','189','0','0','0','20',NULL,'0',NULL,'0'), ('353',NULL,'120','','','1564507208','1971847303','5','0','153','0','0','0','0',NULL,'0',NULL,'0'), ('357',NULL,'114','','','1564536416','2147483647','5','0','147','0','0','0','0',NULL,'0',NULL,'0'), ('417',NULL,'79','123','','1564587880','2071337695','8','1','244','0','0','0','0',NULL,'0',NULL,'0'), ('418',NULL,'96','','','1564619259','1875253314','5','1','384','0','0','0','0',NULL,'0',NULL,'0'), ('420',NULL,'96','','','1564619590','1875253314','5','2','19','0','0','0','0',NULL,'0',NULL,'0'), ('423',NULL,'96','','','1564619620','1875253314','5','0','22','0','0','0','0',NULL,'1',NULL,'0'), ('424',NULL,'103','哈喽','<p>\r\n	哈喽</p>','1564620146','1875253314','5','0','32','0','0','0','0',NULL,'1',NULL,'0'), ('425',NULL,'10','','','1564622300','1875253314','5','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('426',NULL,'114','','','1564626808','1928984922','5','0','27','0','0','0','0',NULL,'1',NULL,'0'), ('427',NULL,'96','1234','<p>\r\n	234w5e</p>','1564626821','1875253314','5','0','914','0','0','0','0',NULL,'0',NULL,'0'), ('428',NULL,'96','1234','<p>\r\n	234w5e</p>','1564626829','1875253314','5','1','19','0','0','0','0',NULL,'0',NULL,'0'), ('429',NULL,'134','123','<p>\r\n	123</p>','1564628662','1875253314','5','0','179','0','0','0','2',NULL,'0',NULL,'0'), ('430',NULL,'85','111','<p>\r\n	111</p>','1564629232','1875253314','5','0','154','0','0','0','0',NULL,'0',NULL,'0'), ('431',NULL,'96','hvhj','<p>\r\n	yjcgh</p>','1564629551','1875253314','5','1','20','0','0','0','0',NULL,'0',NULL,'0');
INSERT INTO `bbs_post` VALUES ('432',NULL,'96','chchy','<p>\r\n	cjhgc</p>','1564629625','2147483647','5','1','33','0','0','0','0',NULL,'0',NULL,'0'), ('437',NULL,'111','','','1564640998','1806643692','5','0','19','0','0','0','0',NULL,'1',NULL,'0'), ('537',NULL,'34','','<p>\r\n	qwewr</p>','1567733677','1033225540','9','0','192','0','0','0','0',NULL,'0',NULL,'0'), ('440',NULL,'146','666','','1564642607','2147483647','5','1','41','0','0','0','1',NULL,'0',NULL,'0'), ('383',NULL,'10','1','<p>\r\n	12</p>','1564553439','1928469046','5','0','174','0','0','0','0',NULL,'0',NULL,'0'), ('442',NULL,'126','123','','1564642776','2147483647','5','0','75','0','0','0','0',NULL,'0',NULL,'0'), ('443',NULL,'124','','','1564645372','2147483647','5','0','127','0','0','0','0',NULL,'0',NULL,'0'), ('445',NULL,'124','','<p>\r\n	的点点滴滴多多多多多h</p>','1564646551','2147483647','5','0','306','0','0','0','0',NULL,'0',NULL,'0'), ('450',NULL,'118','','<p>\r\n	bugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbugbug</p>','1564650584','2147483647','5','0','205','0','0','0','0',NULL,'0',NULL,'0'), ('454',NULL,'126','tes1','','1564666824','2147483647','5','3','29','0','0','0','0',NULL,'0',NULL,'0'), ('458',NULL,'134','1231','<p>\r\n	1234</p>','1564669578','1929130941','13','1','67','0','0','0','0',NULL,'1','red','0'), ('459',NULL,'134','qweq','<p>\r\n	we</p>','1564670326','1929130941','5','1','29','0','0','0','0',NULL,'0',NULL,'0'), ('463',NULL,'134','123','<p>\r\n	123</p>','1564710592','1929130941','5','0','182','0','0','0','0',NULL,'0',NULL,'0'), ('464',NULL,'155','嘎嘎嘎嘎嘎过过过过过过军军军或ggggggggggggggggggggggggggggggggggg','','1564713399','2147483647','5','0','42','1','1','0','0',NULL,'1',NULL,'0'), ('465',NULL,'154','','','1564716217','1929130941','5','0','943','0','0','0','0',NULL,'0',NULL,'0'), ('466',NULL,'165','','','1564716343','2147483647','5','1','63','0','0','0','0',NULL,'0',NULL,'0'), ('469',NULL,'165','今天','<p>\r\n	下雨哦</p>','1564718336','2147483647','5','1','25','0','0','0','12',NULL,'1',NULL,'0'), ('470',NULL,'144','hahahah','<p>\r\n	sdafasdfa</p>','1564719068','2147483647','5','0','30','0','0','0','0',NULL,'1',NULL,'0'), ('475',NULL,'134','123','<p>\r\n	1234</p>','1564734303','1875253314','5','0','21','0','0','0','0',NULL,'1',NULL,'0'), ('476',NULL,'134','13413241','<p>\r\n	43214&nbsp;</p>','1564734313','1875253314','5','0','23','0','0','0','0',NULL,'1',NULL,'0'), ('478',NULL,'133','asdasf','<p>\r\n	sadgasdg</p>','1564734829','1928982768','5','4','15','0','0','0','0',NULL,'1',NULL,'0'), ('480',NULL,'134','e\'we\'w','<p>\r\n	we&#39;r</p>','1564734889','1875253314','5','0','47','1','1','0','0',NULL,'1','red','0'), ('486',NULL,'154','0111','<p>\r\n	2222</p>','1564754627','1875253314','5','2','21','0','0','0','0',NULL,'1',NULL,'0'), ('551',NULL,'205','aaa','<p>\r\n	123456</p>','1567838371','1929035131','9','0','162','0','0','0','0',NULL,'0',NULL,'0'), ('550',NULL,'205','kkk','<p>\r\n	123456</p>','1567838218','1929035131','9','0','166','0','0','0','0',NULL,'0',NULL,'0'), ('553',NULL,'205','aaa','<p>\r\n	ghdhs</p>','1567839013','1929035131','5','0','207','0','0','0','0',NULL,'0',NULL,'0'), ('524',NULL,'10','','','1567603512','1033224729','9','0','149','0','0','0','0',NULL,'0',NULL,'0'), ('525',NULL,'10','123123','<p>\r\n	123123</p>','1567646347','1033225540','9','14','296','1','1','0','0',NULL,'1','red','0'), ('531',NULL,'10','','','1567687571','1033225540','5','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('526',NULL,'10','','','1567667232','1929035131','15','0','17','0','1','0','0',NULL,'1','red','0'), ('527',NULL,'10','4545','<p>\r\n	454564</p>','1567685983','1929035131','7','0','2','0','0','0','10',NULL,'1',NULL,'0'), ('528',NULL,'177','啊实打实','<p>\r\n	啊实打实大</p>','1567686054','1929035131','9','1','74','0','0','0','10',NULL,'0',NULL,'0'), ('534',NULL,'195','','','1567731987','1929035131','9','0','131','0','0','0','0',NULL,'0',NULL,'0'), ('557',NULL,'10','cscscs','<p>\r\n	cscsc</p>','1567839379','1033225540','9','1','18','0','0','0','0',NULL,'0',NULL,'0'), ('558',NULL,'205','bvvbsfvfsaasasv','','1567839442','1929035131','5','0','892','0','0','0','0',NULL,'0',NULL,'0'), ('559',NULL,'205','111','<p>\r\n	hhjgghhh</p>','1567840428','1929035131','5','0','108','0','0','0','0',NULL,'0',NULL,'0'), ('560',NULL,'205','','','1567840500','1929035131','5','0','295','0','0','0','0',NULL,'0',NULL,'0'), ('561',NULL,'205','','','1567840519','1929035131','5','0','175','0','0','0','0',NULL,'0',NULL,'0'), ('562',NULL,'205','','','1567840526','1929035131','5','0','193','0','1','0','0',NULL,'0','red','0'), ('563',NULL,'205','fgdd','<p>\r\n	fgdsgssd</p>','1567841880','1929035131','3','0','3','0','0','0','0',NULL,'1',NULL,'0'), ('564',NULL,'205','dfsg','<p>\r\n	dfsgdsgs</p>','1567841897','1929035131','3','0','7','0','1','0','0',NULL,'1','red','0'), ('565',NULL,'205','gsdgs','<p>\r\n	dsggdg</p>','1567841917','1929035131','3','0','3','0','0','0','0',NULL,'1',NULL,'0'), ('566',NULL,'205','casca','<p>\r\n	cacaas</p>','1567841951','1929035131','12','0','327','0','0','0','0',NULL,'0',NULL,'0'), ('567',NULL,'205','aacacac','<p>\r\n	cascaa</p>','1567841968','1929035131','6','0','185','0','0','0','0',NULL,'0',NULL,'0'), ('568',NULL,'205','scsac','<p>\r\n	cascasca</p>','1567841990','1929035131','7','0','203','0','0','0','0',NULL,'0',NULL,'0'), ('569',NULL,'205','','<p>\r\n	sacassa</p>','1567842002','1929035131','6','0','424','0','0','0','0',NULL,'0',NULL,'0'), ('570',NULL,'205','cxcc','<h1>\r\n	x xc xc xc x</h1>','1567842017','1929035131','13','0','5','0','0','0','0',NULL,'1',NULL,'0'), ('575',NULL,'191','硕大的撒','<p>\r\n	爱仕达敖德萨多啊啊啊爱仕达所大所多敖德萨多</p>','1567843353','1033225540','9','2','61','0','0','0','20',NULL,'0',NULL,'0'), ('577',NULL,'10','fsaf','<p>\r\n	qwefqg</p>','1567844854','1929035131','4','0','291','0','0','0','20',NULL,'0',NULL,'0'), ('578',NULL,'10','fdfdf','<p>\r\n	fdfdfd</p>','1567844894','1033225540','12','0','197','0','0','0','0',NULL,'0',NULL,'0'), ('579',NULL,'205','aaaaa','<p>\r\n	aaaaa</p>','1567847067','1929035131','9','1','19','0','0','0','0',NULL,'0',NULL,'0'), ('580',NULL,'10','fdf','<p>\r\n	fdfd</p>','1567847140','1033225540','9','0','165','0','0','0','0',NULL,'0',NULL,'0'), ('581',NULL,'10','x s x s','<p>\r\n	享</p>','1567847633','1033225540','9','1','143','0','0','0','0',NULL,'0',NULL,'0'), ('582',NULL,'205','1111111111','<p>\r\n	11111111111111</p>','1567847653','1929035131','9','0','174','0','0','0','0',NULL,'0',NULL,'0'), ('583',NULL,'205','','','1567848108','1929035131','9','0','180','0','0','0','0',NULL,'0',NULL,'0'), ('584',NULL,'205','1111111','<p>\r\n	11111111111</p>','1567848126','1929035131','9','0','191','0','1','0','0',NULL,'0',NULL,'0'), ('588',NULL,'10','这是一个帖子标题','<p>\r\n	这是一个帖子内容，不可藐视</p>','1567854217','1929035131','9','4','81','1','1','0','0',NULL,'1','red','0'), ('591',NULL,'10','sccs','<p>\r\n	sscs</p>','1567857604','1033225540','9','2','34','0','1','0','0',NULL,'0',NULL,'0'), ('594',NULL,'10','dsdsd','<p>\r\n	dsdsdsd</p>','1567858155','1033225540','9','2','63','1','1','0','12',NULL,'1','red','0'), ('597',NULL,'10','fsds','<p>\r\n	dsds</p>','1567859057','1033225540','9','0','68','1','1','0','0',NULL,'1','red','0'), ('598',NULL,'10','cdcd','<p>\r\n	cdcd</p>','1567859680','1033225540','9','6','230','1','1','0','12',NULL,'1','red','0'), ('599',NULL,'10','测试','<p>\r\n	123</p>','1567909616','1989153959','13','0','6','0','0','0','0',NULL,'1','red','0'), ('601',NULL,'10','qwe','<p>\r\n	qwe</p>','1567912268','1989153959','13','1','50','0','1','0','0',NULL,'1',NULL,'0'), ('610',NULL,'10','111','<p>\r\n	111</p>','1567920629','1033225540','8','0','177','0','0','0','0',NULL,'0',NULL,'0'), ('611',NULL,'10','111','<p>\r\n	111</p>','1567920629','1033225540','8','0','180','0','0','0','0',NULL,'0',NULL,'0'), ('612',NULL,'10','1111','<p>\r\n	1111</p>','1567920690','1033225540','8','0','228','0','0','0','1',NULL,'0',NULL,'0'), ('616',NULL,'10','11','<p>\r\n	11</p>','1567920954','1033225540','8','1','27','0','0','0','0',NULL,'0',NULL,'0'), ('617',NULL,'10','11','<p>\r\n	11</p>','1567923065','1033225540','9','1','12','0','0','0','0',NULL,'1',NULL,'0'), ('618',NULL,'10','1212','<p>\r\n	1212</p>','1567923113','1033225540','9','3','13','0','0','0','0',NULL,'1',NULL,'0'), ('627',NULL,'34','阿打算打算','<p>\r\n	啊实打实大师大所多</p>','1567942212','1929035131','9','8','32','1','0','0','0',NULL,'1',NULL,'0'), ('634',NULL,'34','aaaaaaaaaaaa','<p>\r\n	aaaaaaaaaaaaaaa</p>','1567987948','1929035131','9','0','143','0','1','0','0',NULL,'0',NULL,'0'), ('635',NULL,'34','ssssssssssssssss','<p>\r\n	ssssssssssssssssssssss</p>','1567987970','1929035131','9','0','171','1','0','0','0',NULL,'0',NULL,'0'), ('636',NULL,'34','ssssssssssssssss','<p>\r\n	ssssssssssssssssssssss</p>','1567987977','1929035131','9','1','94','1','1','0','0',NULL,'1','red','0'), ('641',NULL,'34','aaaaa','<p>\r\n	aaaaaaaaaaaaaa</p>','1567989606','1929035131','9','1','22','0','0','0','0',NULL,'0',NULL,'0'), ('644',NULL,'195','名标题','<p>\r\n	名标题的内容</p>','1567995977','1929035131','9','7','158','0','0','0','3',NULL,'0',NULL,'0'), ('647',NULL,'10','撒旦撒','<p>\r\n	4343</p>','1568007714','1033225540','9','0','9','0','0','0','0',NULL,'1',NULL,'0'), ('648',NULL,'10','21e21re23r','<p>\r\n	2re213r32</p>','1568010555','1929035131','9','0','7','0','0','0','0',NULL,'1',NULL,'0'), ('649',NULL,'34','ssssssssssssssss','<p>\r\n	ssssssssssssssssssssss</p>','1568017360','1929035131','9','2','11','0','1','0','0',NULL,'1',NULL,'0'), ('652',NULL,'209','112efisfianf','<p>\r\n	dwaehoifhnsaivnsdljc0aew9jvnjrskbvkldshvuewgtfbsfdjkvniudeavnlkewnuerhvruhvurhviuehvioehfioewjf</p>','1568019195','1033225540','8','0','291','0','0','0','20',NULL,'0',NULL,'0'), ('653',NULL,'209','feiwufnilnfiesruvnk','<p>\r\n	fweofjvnflkvmewfojfv89ebjvf</p>','1568019417','1033225540','5','0','202','0','0','0','20',NULL,'0',NULL,'0'), ('658',NULL,'10','asdasd','<p>\r\n	asdasdas</p>','1568022122','1929035131','13','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('659',NULL,'10','sad','asd','1568022155','1929035131','13','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('660',NULL,'10','asda','sd','1568022175','1929035131','13','0','5','0','0','0','0',NULL,'1',NULL,'0'), ('661',NULL,'10','丰润区4规范','<p>\r\n	人气高vq4v</p>','1568030491','1929035131','9','2','20','1','0','0','0',NULL,'1',NULL,'0'), ('662',NULL,'10','sdsdsd','<p>\r\n	sdsdssdsdsd</p>','1568030803','1033225540','9','1','45','1','1','0','30',NULL,'1','red','0'), ('666',NULL,'10','地方上班去二保','<p>\r\n	飞</p>\r\n<p>\r\n	&nbsp;</p>','1568038153','1929035131','9','0','143','0','0','0','0',NULL,'0',NULL,'0'), ('667',NULL,'10','爱仕达所大所','<p>\r\n	驱蚊器翁群翁</p>','1568038166','1929035131','9','0','169','0','0','0','0',NULL,'0',NULL,'0'), ('668',NULL,'195','99','<p>\r\n	99</p>','1568074741','1929035131','9','17','261','1','1','0','9',NULL,'0',NULL,'0'), ('669',NULL,'10','啊','<p>\r\n	啊</p>','1568082092','1929035131','9','3','68','1','1','0','10',NULL,'1','red','0'), ('674',NULL,'10','sada','sd','1568083196','1929035131','13','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('675',NULL,'10','sds','d','1568083212','1929035131','13','0','2','0','0','0','0',NULL,'1',NULL,'0'), ('676',NULL,'10','asda','sd','1568083227','1929035131','13','0','225','0','0','0','0',NULL,'0',NULL,'0'), ('680',NULL,'10','sssss','','1568086561','1929035131','13','0','3','0','0','0','11',NULL,'1',NULL,'0'), ('681',NULL,'10','金币贴','<p>\r\n	售价20</p>','1568086619','1929035131','13','0','331','1','1','0','20',NULL,'0',NULL,'0'), ('701',NULL,'214','aaaaaaaaaaaaa','<p>\r\n	aaaaaaaaaaaaaaaaaaaaaa</p>','1568107843','1929035131','9','1','22','0','0','0','0',NULL,'0','red','0'), ('703',NULL,'10','sdf','<p>\r\n	sc</p>','1568107926','1929035131','9','0','197','0','0','0','0',NULL,'0',NULL,'0'), ('704',NULL,'10','22','<p>\r\n	22</p>','1568117556','1875130982','9','0','203','0','0','0','0',NULL,'0',NULL,'0'), ('705',NULL,'10','','<p>\r\n	llll</p>','1568199837','1929035131','9','0','250','0','0','0','10',NULL,'0',NULL,'0'), ('706',NULL,'10','nnvbn','<p>\r\n	n vbnvbn&nbsp;</p>','1568200349','1929035131','9','0','210','0','0','0','20',NULL,'0',NULL,'0'), ('707',NULL,'222','','<p>\r\n	卢秋升励志语句：</p>\r\n<p>\r\n	千峰不倒我不倒</p>','1578386749','2147483647','9','0','3','0','0','0','1',NULL,'0',NULL,'0');
INSERT INTO `bbs_post` VALUES ('708',NULL,'222','python','<p>\r\n	志强语录：</p>\r\n<p>\r\n	千峰不倒我不走</p>\r\n<p>\r\n	月亮不睡我不睡</p>','1578387739','2147483647','9','0','7','0','0','0','0',NULL,'0',NULL,'0');
INSERT INTO `bbs_reply` VALUES ('10','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">好东西~tukiz07&nbsp;&nbsp;爱死你了~</span></p>','1444301807','-1062731039','5','1','0'), ('11','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">比较强大</span></p>','1444301822','-1062731039','5','0','0'), ('12','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">看来数据量比我想象的要小很多</span></p>','1444301843','-1062731039','5','0','0'), ('13','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">不错，值得学习。压力测试很重要。另外我觉得把apache换成nginx是不是要快很多。不知道人家的架构设计怎么理解的，apache主要做什么，nginx主要做什么。</span></p>','1444301862','-1062731039','5','1','0'), ('14','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">用$globals、apc、 memcached..分级缓存我有个问题，就是怎么保证数据能够及时更新，比如用户修改完自己资料后，缓存中的数据应该就是最新的，难道要每个级别的缓存都清一次吗？</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">另外apc只能放在同一台机器上，那么多个服务器上的缓存怎么保持一致？</span><br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n  <br style=\"word-wrap: break-word; color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\" />\r\n <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">$globals能在同一个请求的上下文中缓存数据，但是如果中间有修改怎么办？</span></p>','1444301876','-1062731039','5','0','0'), ('81','9','15','','1560865613','1875253314','5','0','0'), ('84','9','15','<p>\r\n	测试</p>','1560878894','2071338726','5','0','0'), ('86','9','15','<p>\r\n	测试111</p>','1560884057','2071338726','5','0','0'), ('18','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">facebook用的是memcached缓存，现在网上说有更好地缓存了，叫redis的东西，这个比memcached更强大一些。</span></p>','1444301934','-1062731039','5','0','0'), ('19','6','9','<p>\r\n  <span style=\"color: rgb(68, 68, 68); font-family: tahoma, \'microsoft yahei\', simsun; font-size: 14px; line-height: 21px;\">太坑人了吧</span></p>','1444301959','-1062731039','5','0','0'), ('20','8','10','<p>\r\n	sfsdfsd</p>','1559707294','1928748306','5','0','1'), ('23','22','21','','1560159102','1928748306','5','0','0'), ('26','9','22','<p>\r\n	admin</p>','1560164807','1928748306','5','0','1'), ('27','4','12','<p>\r\n	说的真棒</p>\r\n<p>\r\n	&nbsp;</p>','1560165509','1928748306','5','0','0'), ('30','7','10','','1560178329','1875307541','5','0','0'), ('34','9','25','<p>\r\n	123</p>','1560346077','2071609571','5','0','1'), ('35','9','25','<p>\r\n	123</p>','1560346097','2071609571','5','0','0'), ('37','7','27','<p>\r\n	123</p>','1560506122','2071610864','5','0','0'), ('40','39','27','<p>\r\n	321</p>','1560518404','2071610864','5','0','0'), ('41','39','27','<p>\r\n	76543</p>','1560518468','2071610864','5','0','0'), ('43','9','27','<p>\r\n	123</p>','1560575492','1929132719','5','0','0'), ('46','9','24','','1560592974','1929132719','5','0','0'), ('47','9','11','<ul>\r\n	<li>\r\n		123321<strong><em>?</em></strong></li>\r\n</ul>','1560672607','1929132719','5','0','0'), ('53','52','27','<p>\r\n	asdadsad</p>','1560702206','2071790425','3','1','0'), ('54','49','26','<p>\r\n	544</p>\r\n<p>\r\n	&nbsp;</p>','1560748090','1929132719','5','1','0'), ('514','424','10','<p>\r\n	我经常觉得自己不够傻逼而不能融入你们</p>','1567166834','2147483647','5','1','0'), ('64','63','26','<p>\r\n	465</p>','1560770542','1929035499','5','0','0'), ('70','9','19','<p>\r\n	2222222</p>','1560778864','1929035499','5','0','0'), ('103','90','10','','1560931501','1928469057','5','0','1'), ('104','102','65','<p>\r\n	111</p>','1560931949','1875253314','5','1','0'), ('105','102','65','<p>\r\n	1111</p>','1560932027','1875253314','5','1','0'), ('106','102','65','<p>\r\n	hhh</p>','1560932040','1875253314','5','0','0'), ('107','9','24','','1560932513','1875253314','5','0','0'), ('108','90','10','<p>\r\n	12</p>','1560932864','1928469057','5','0','0'), ('111','102','65','','1560936080','1875253314','5','1','1'), ('112','102','65','<p>\r\n	1</p>','1560936925','1875253314','5','1','0'), ('113','9','62','<p>\r\n	qw</p>','1560942146','1928469057','5','0','0'), ('114','9','62','<p>\r\n	gpokbnknnkkklm&nbsp;</p>','1560942186','1928469057','5','0','0'), ('115','102','26','<p>\r\n	fasdfad</p>','1560943284','1928469057','5','0','0'), ('116','102','26','<p>\r\n	真是够惨的了</p>\r\n<p>\r\n	&nbsp;</p>','1560943327','1928469057','5','0','0'), ('117','102','26','<p>\r\n	&nbsp;</p>\r\n<p>\r\n	１</p>','1560943731','1928469057','5','1','0'), ('118','102','26','<p>\r\n	什么啊这是</p>\r\n<p>\r\n	！！！</p>\r\n<p>\r\n	&nbsp;</p>','1560943778','1928469057','5','1','0'), ('120','90','10','','1560944089','1875253314','5','0','0'), ('121','90','10','<p>\r\n	aaaaa</p>','1560944111','1928469057','5','1','0'), ('122','42','10','<p>\r\n	cccccyyyyy</p>','1560946921','1928469057','4','0','0'), ('124','8','26','<p>\r\n	啊发顺丰</p>\r\n<p>\r\n	&nbsp;</p>','1560949559','1928469057','5','1','0'), ('125','80','26','<p>\r\n	大手大脚</p>\r\n<p>\r\n	&nbsp;</p>','1560949627','1928469057','5','0','0'), ('126','80','26','<p>\r\n	啥啊这是</p>','1560949652','1928469057','5','0','0'), ('127','123','65','<p>\r\n	12345</p>','1560950368','1875253314','3','0','0'), ('128','89','10','','1560951365','1928469057','5','1','0'), ('129','89','10','','1560951460','1928469057','5','1','0'), ('131','130','65','<p>\r\n	12345678</p>','1560953124','1875253314','6','1','0'), ('133','89','10','<p>\r\n	fdsfadsf</p>\r\n<p>\r\n	&nbsp;</p>','1560953938','1928469057','5','0','0'), ('134','90','10','<p>\r\n	德生科技福建卡萨加大奖赏看见</p>','1560963986','1033803983','5','0','0'), ('135','7','26','','1560990933','1928469057','5','0','0'), ('136','90','10','','1560995236','1875253314','5','0','0'), ('137','90','10','','1560997080','1928469057','5','0','0'), ('138','7','26','<p>\r\n	不错</p>','1560997739','1928469057','5','0','0'), ('139','94','10','','1560999070','1875253314','5','1','0'), ('140','94','10','','1560999094','1875253314','5','1','0'), ('141','94','10','<p>\r\n	1111</p>','1560999112','1875253314','5','1','0'), ('147','90','31','<p>\r\n	12345y</p>','1561002749','1875253314','5','0','0'), ('149','90','10','<p>\r\n	测试一下</p>','1561011306','1928469057','5','0','0'), ('158','89','10','<p>\r\n	111</p>','1561013009','1928469057','5','0','0'), ('160','90','48','','1561013433','1928469057','5','0','0'), ('161','90','48','','1561013466','1928469057','5','0','0'), ('166','165','10','','1561014171','1875253314','5','0','0'), ('167','165','10','','1561014269','1875253314','5','0','0'), ('169','8','37','<p>\r\n	nihao</p>','1561015398','1928469057','5','0','1'), ('179','146','22','','1561021997','1928469057','5','0','1'), ('180','146','22','','1561022006','1928469057','5','0','0'), ('398','280','79','','1564565049','1875253314','8','0','0'), ('397','123','111','<p>\r\n	dghd</p>','1564563975','1875253314','3','0','0'), ('188','146','46','<p>\r\n	qq</p>','1561044801','2147483647','5','0','0'), ('191','90','10','<p>\r\n	6666</p>','1561081133','1875253314','5','0','0'), ('192','90','10','<p>\r\n	66</p>','1561081548','1928469057','5','0','0'), ('193','90','10','','1561082059','1875253314','5','0','0'), ('194','190','21','','1561082325','1928469057','4','0','0'), ('195','190','21','','1561082354','1928469057','4','0','0'), ('196','190','21','','1561082367','1928469057','4','0','0'), ('202','90','23','','1561086709','1928469057','5','0','0'), ('203','146','46','<p>\r\n	aa</p>','1561086949','1928469057','5','0','0'), ('206','90','10','','1561088366','1928469057','5','0','0'), ('207','146','37','<p>\r\n	fre</p>','1561090378','1928469057','5','0','0'), ('209','205','21','','1561095431','1928469057','4','0','0'), ('210','205','21','','1561095438','1928469057','4','0','0'), ('211','205','21','','1561095449','1928469057','4','0','0'), ('382','278','96','<p>\r\n	lalala</p>','1564549038','1928469046','5','0','0'), ('213','89','10','<p>\r\n	1</p>','1561117246','1928469057','5','0','0'), ('214','89','10','<p>\r\n	1</p>','1561117252','1928469057','5','0','0'), ('215','89','10','<p>\r\n	1</p>','1561117259','1928469057','5','0','0'), ('216','89','10','<p>\r\n	1</p>','1561117264','1928469057','5','0','0'), ('217','89','10','<p>\r\n	1</p>','1561117271','1928469057','5','0','0'), ('218','89','10','<p>\r\n	1</p>','1561117280','1928469057','5','0','0'), ('219','89','10','<p>\r\n	1</p>','1561117287','1928469057','5','0','0'), ('220','198','73','<p>\r\n	1</p>','1561120606','1928469057','5','0','0'), ('221','208','21','','1561123184','1928469057','5','0','0'), ('222','208','21','<p>\r\n	iop【</p>','1561124049','1928469057','5','0','0'), ('223','208','21','<p>\r\n	11111111111111111</p>','1561124067','1928469057','5','0','0'), ('224','200','21','<p>\r\n	eeeeeeeee</p>','1561168978','1928469057','5','0','0');
INSERT INTO `bbs_reply` VALUES ('235','233','75','<p>\r\n	3</p>','1563875537','1928668075','5','0','0'), ('236','232','76','<p>\r\n	有人来买吗</p>','1563875601','1928668075','5','1','0'), ('238','232','78','<p>\r\n	123</p>','1563875642','1928668075','5','0','0'), ('239','232','78','<p>\r\n	456</p>','1563875692','1928668075','5','0','0'), ('240','232','79','<p>\r\n	一米七</p>','1563875731','1928668384','5','0','0'), ('242','241','80','<p>\r\n	怎么样</p>','1563875786','1928668075','5','0','0'), ('243','241','80','<p>\r\n	挺好的</p>','1563875806','1928668075','5','0','0'), ('245','204','83','<p>\r\n	、、、、、、、</p>','1563883463','1928668075','4','0','0'), ('532','413','10','','1567688241','1929035131','9','0','0'), ('533','413','10','123','1567688255','1929035131','9','0','0'), ('252','247','75','<p>\r\n	23人</p>','1563934196','1875136915','5','0','0'), ('381','278','96','<p>\r\n	lalala</p>','1564548971','1928469046','5','0','0'), ('541','413','34','<p>\r\n	asdfasdf</p>','1567751342','1033225540','9','0','0'), ('539','413','10','','1567749955','1929035131','9','0','0'), ('540','413','34','<p>\r\n	dasdfadf</p>','1567751334','1033225540','9','0','0'), ('403','395','146','<p>\r\n	888888</p>\r\n<p>\r\n	&nbsp;</p>','1564577352','1875253314','5','0','0'), ('405','278','132','<p>\r\n	1</p>','1564578355','1875253314','5','0','0'), ('406','278','24','<p>\r\n	lkklkllk&#39;k的范围来看【【】确认为二位方式，按时，zjpwqeo我去热捧枪王排位pr稿枇杷膏</p>\r\n<p>\r\n	&nbsp;</p>','1564578953','2147483647','5','0','0'), ('271','8','10','<p>\r\n	qweqwe</p>\r\n<p>\r\n	&nbsp;</p>','1564138287','1928469046','5','0','0'), ('272','8','10','<p>\r\n	qweqweq</p>\r\n<p>\r\n	&nbsp;</p>','1564138301','1928469046','5','0','0'), ('407','8','24','<p>\r\n	斤斤计较军军军军军军军军军军军军军军军</p>','1564579092','2147483647','5','0','0'), ('281','280','10','<p>\r\n	好？</p>','1564192674','2147483647','8','0','1'), ('282','278','10','<p>\r\n	拼搏到无能为力</p>','1564209693','1928469046','5','0','0'), ('379','278','96','<p>\r\n	hhhhh</p>','1564548940','1928469046','5','0','0'), ('283','8','10','<p>\r\n	dfsa</p>','1564214510','2147483647','5','0','0'), ('290','289','90','<p>\r\n	13123123123123</p>','1564225238','1928469046','3','0','0'), ('291','289','90','<p>\r\n	1321312321321312312</p>','1564225244','1928469046','3','0','0'), ('292','289','90','<p>\r\n	1232312312312321321312</p>','1564225250','1928469046','3','0','0'), ('293','289','90','<p>\r\n	3123123213213123</p>','1564225257','1928469046','3','0','0'), ('295','294','90','<p>\r\n	2132132131231</p>','1564228121','1928469046','5','0','0'), ('296','294','90','<p>\r\n	1313123123123</p>','1564228127','1928469046','5','0','0'), ('297','294','90','<p>\r\n	3123123123</p>','1564228132','1928469046','5','0','0'), ('415','278','121','<p>\r\n	我来测试一下 皮卡皮卡</p>','1564582310','1929132324','5','0','0'), ('380','278','96','<p>\r\n	heiheihei</p>\r\n<p>\r\n	&nbsp;</p>','1564548956','1928469046','5','0','0'), ('311','310','10','','1564363787','2147483647','5','0','0'), ('312','119','10','<p>\r\n	nm</p>','1564367040','1928469046','7','0','0'), ('317','119','10','','1564394700','2147483647','7','0','0'), ('323','280','10','<ul>\r\n	<li>\r\n		<em><strong>你完了</strong></em></li>\r\n</ul>','1564405446','1928469046','8','0','1'), ('325','321','108','<p>\r\n	1231231313</p>','1564408803','1928469046','5','0','0'), ('326','280','96','<p>\r\n	<em><strong>才怪&nbsp; ==~&mdash;&mdash;|~|&mdash;&mdash;</strong></em></p>','1564409687','1928469046','8','1','0'), ('384','378','10','<p>\r\n	test</p>\r\n<p>\r\n	&nbsp;</p>','1564556456','1928469046','5','0','0'), ('386','385','10','<p>\r\n	22</p>','1564557679','1928469046','6','0','0'), ('387','385','10','<p>\r\n	22</p>','1564557692','1928469046','6','0','0'), ('388','385','10','<p>\r\n	33</p>','1564557700','1928469046','6','0','0'), ('389','289','10','<p>\r\n	11</p>\r\n<p>\r\n	&nbsp;</p>','1564557839','1928469046','3','0','0'), ('390','289','10','<p>\r\n	514165</p>','1564557868','1928469046','3','0','0'), ('334','278','10','<p>\r\n	小行星</p>','1564471512','2147483647','5','0','0'), ('335','8','10','<p>\r\n	<strong>江东父老能看见</strong></p>','1564484114','2147483647','5','0','0'), ('414','278','121','<p>\r\n	回复楼主</p>','1564582283','1929132324','5','0','0'), ('341','340','120','<p>\r\n	adjshflahfl</p>','1564484720','1928469046','5','0','0'), ('342','340','119','<p>\r\n	好看大方可变空间</p>','1564484733','1928469046','5','0','0'), ('344','278','84','<p>\r\n	python</p>','1564486031','2147483647','5','0','0'), ('345','278','84','<p>\r\n	111111</p>','1564486052','2147483647','5','0','0'), ('346','343','122','<p>\r\n	123</p>','1564486186','2147483647','9','0','0'), ('351','343','122','<p>\r\n	123</p>','1564493239','1928469046','9','0','0'), ('354','313','111','<p>\r\n	ghndgnd</p>','1564529749','1875253314','5','0','0'), ('355','343','112','<ol>\r\n	<li>\r\n		<em><strong>qweeq</strong></em></li>\r\n</ol>','1564532528','1875253314','9','0','0'), ('356','289','112','<p>\r\n	qwer</p>','1564534559','1875253314','3','0','0'), ('419','418','96','','1564619433','1875253314','5','0','0'), ('421','420','96','','1564619598','1875253314','5','0','0'), ('422','420','96','','1564619609','1875253314','5','0','0'), ('433','278','79','','1564632455','2147483647','5','0','0'), ('434','432','10','<p>\r\n	123</p>\r\n<p>\r\n	&nbsp;</p>','1564639612','1928982768','5','0','0'), ('435','123','75','','1564640178','1928982768','3','1','0'), ('436','428','111','<p>\r\n	机卡</p>','1564640977','1875253314','5','0','0'), ('439','431','114','<p>\r\n	weff</p>','1564642250','2147483647','5','0','0'), ('441','440','146','<p>\r\n	666</p>','1564642653','1929130941','5','0','0'), ('372','331','111','<p>\r\n	1</p>','1564541582','1928469046','9','0','0'), ('374','327','10','<p>\r\n	回复+1</p>','1564542756','1928469046','4','0','0'), ('444','413','85','<p>\r\n	111</p>','1564645563','1929130941','9','0','0'), ('404','395','146','<p>\r\n	66666666</p>','1564577368','1875253314','5','0','0'), ('446','442','111','<p>\r\n	jbk</p>','1564647072','1929130941','5','1','0'), ('447','413','10','','1564647152','2147483647','9','0','0'), ('448','413','111','<p>\r\n	fgbfh</p>','1564647217','1929130941','9','0','0'), ('449','8','128','<p>\r\n	chai</p>','1564647735','2147483647','5','0','0'), ('451','289','34','','1564660898','1929130941','3','0','0'), ('452','289','34','','1564660908','1929130941','3','0','0'), ('453','278','76','','1564666511','2147483647','5','0','0'), ('455','454','126','<p>\r\n	1</p>','1564666829','2147483647','5','0','0'), ('456','454','126','<p>\r\n	1</p>','1564666832','2147483647','5','0','0'), ('457','454','126','<p>\r\n	1</p>','1564666835','2147483647','5','0','0'), ('460','459','134','','1564670332','1929130941','5','0','0'), ('461','278','142','<p>\r\n	213</p>','1564671280','1955075258','5','0','0'), ('462','8','85','<p>\r\n	哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈</p>','1564710210','1929130941','5','0','0'), ('467','262','147','','1564717457','1929130941','5','0','0'), ('468','197','143','<p>\r\n	aaaaa123</p>','1564718118','1929130941','4','0','0'), ('471','278','153','<p>\r\n	好秀的头像</p>\r\n<p>\r\n	&nbsp;</p>','1564723989','1929130941','5','1','0'), ('472','278','144','<p>\r\n	dasfxcvcb</p>\r\n<p>\r\n	fdfdfh</p>','1564724997','2147483647','5','0','0'), ('473','278','147','<p>\r\n	你好</p>','1564729285','1929130941','5','0','0'), ('474','466','147','<p>\r\n	你好</p>','1564729765','1929130941','5','0','0'), ('477','278','134','<p>\r\n	风格豆腐干方法</p>','1564734815','1875253314','5','0','0'), ('479','478','133','<p>\r\n	sdfsdgf</p>','1564734858','1928982768','5','0','0'), ('481','478','133','','1564734935','1928982768','5','0','0'), ('482','478','133','','1564734946','1928982768','5','0','0'), ('483','478','133','','1564734974','1928982768','5','0','0'), ('484','280','160','<p>\r\n	test</p>','1564735407','1928982768','8','1','1'), ('485','402','160','<p>\r\n	qwe</p>','1564744055','1928982768','3','0','0'), ('487','486','154','<p>\r\n	1234567890-</p>','1564754659','1875253314','5','0','0'), ('488','486','154','<p>\r\n	123456789</p>','1564754669','1875253314','5','1','0'), ('489','458','143','<p>\r\n	aaa</p>','1565364670','1875131150','13','0','0');
INSERT INTO `bbs_reply` VALUES ('522','413','10','','1567313920','1929023297','9','0','0'), ('554','278','205','<p>\r\n	bikjiini</p>','1567839110','1929035131','5','0','0'), ('523','410','10','<p>\r\n	aaa</p>','1567602993','1033224729','9','0','0'), ('510','486','177','<p>\r\n	前排围观</p>','1566875911','2147483647','5','0','0'), ('511','413','10','<p>\r\n	<strong>sdddd</strong></p>','1567060824','2147483647','9','0','0'), ('513','413','10','','1567072158','2147483647','9','0','0'), ('530','525','10','','1567687541','1033225540','9','1','0'), ('529','528','177','<p>\r\n	啊实打实大</p>','1567686072','1929035131','9','0','0'), ('500','278','10','<p>\r\n	斯蒂芬</p>','1566873082','2147483647','5','0','0'), ('501','469','10','<p>\r\n	1111</p>','1566873102','2147483647','5','0','0'), ('535','401','195','<p>\r\n	lk/l</p>','1567732420','1929035131','9','0','0'), ('536','401','195','<p>\r\n	hjhj</p>','1567732434','1929035131','9','0','0'), ('555','278','205','<p>\r\n	jvhbjbjbjbjhbjbjbhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllliiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiioooooooooooooooooooooooooooooooooooooooooooooooooooooooovvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvbbbbbbbbbbbbnnnnnnnnnnnnnmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmvbbbbbbbbbbbbbbbbbbbbbbbb vdfggggggggggggresaeeeryy533333w224364yeusxit5juftyitkkkkkkkkkfki6f5ffoyi98lulih8ughuiot7</p>','1567839216','1929035131','5','0','0'), ('556','278','205','<p>\r\n	hgmhm fh</p>','1567839370','1929035131','5','0','0'), ('571','525','34','<p>\r\n	111111111111111111111111</p>','1567842905','1929035131','9','0','0'), ('572','525','34','<p>\r\n	22222222222222222222222222</p>','1567842913','1929035131','9','0','0'), ('573','525','34','<p>\r\n	3333333333333333333</p>','1567842923','1929035131','9','0','0'), ('574','557','34','<p>\r\n	1111111</p>','1567843341','1929035131','9','0','0'), ('576','575','10','<p>\r\n	啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</p>','1567843831','1929035131','9','0','0'), ('585','579','181','','1567849299','1033225540','9','0','0'), ('586','525','10','','1567852995','1929035131','9','0','0'), ('587','575','10','<p>\r\n	hhhhhhhaniadihfoivohsdlnc&nbsp;</p>','1567854170','1929035131','9','0','0'), ('589','588','10','<p>\r\n	哈哈哈哈哈这是一个帖子回复去1</p>','1567854240','1929035131','9','0','0'), ('590','588','10','<table cellpadding=\"0\" cellspacing=\"0\" style=\"overflow-wrap: break-word; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; empty-cells: show; border-collapse: collapse; table-layout: fixed; width: 757px; color: rgb(68, 68, 68); font-family: tahoma, helvetica, simsun, sans-serif;\">\r\n	<tbody style=\"overflow-wrap: break-word;\">\r\n		<tr style=\"overflow-wrap: break-word;\">\r\n			<td class=\"t_f\" id=\"postmessage_589\" style=\"overflow-wrap: break-word; margin: 0px; padding: 0px; border-width: 0px; border-style: initial; border-color: initial; font-size: 14px;\">\r\n				<p style=\"overflow-wrap: break-word; margin: 0px; padding: 0px; border: 0px;\">\r\n					哈哈哈哈哈这是一个帖子回复去2</p>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p>\r\n	&nbsp;</p>','1567854256','1929035131','9','1','0'), ('592','525','10','<p>\r\n	12312313</p>\r\n<p>\r\n	&nbsp;</p>','1567858055','1929035131','9','0','0'), ('593','525','10','<p>\r\n	dfgh冰雨你摸排</p>','1567858076','1929035131','9','0','0'), ('595','591','10','<p>\r\n	ddfdfdsfdsfsdfdfsfsdff</p>','1567858842','1033225540','9','0','0'), ('596','591','10','<p>\r\n	hbuyb</p>','1567858868','1033225540','9','0','0'), ('600','525','205','','1567912250','1929035131','9','0','0'), ('602','598','201','<p>\r\n	a&#39;s&#39;d&#39;f</p>','1567912318','1033225540','9','1','0'), ('603','598','201','<p>\r\n	1</p>\r\n<p>\r\n	&nbsp;</p>','1567912340','1033225540','9','1','0'), ('604','598','201','<p>\r\n	asdasd</p>','1567912348','1033225540','9','0','1'), ('605','598','201','<p>\r\n	afdsf</p>','1567912353','1033225540','9','0','1'), ('606','598','201','<p>\r\n	asdasd</p>','1567912363','1033225540','9','0','0'), ('607','598','201','<p>\r\n	asfsd</p>','1567912371','1033225540','9','0','0'), ('608','525','205','<p>\r\n	42</p>\r\n<p>\r\n	202</p>\r\n<p>\r\n	202</p>\r\n<p>\r\n	&nbsp;</p>','1567915155','1929035131','9','0','0'), ('609','417','205','<p>\r\n	111111111111</p>','1567915874','1929035131','8','0','0'), ('613','525','205','<p>\r\n	11111111111111</p>','1567920757','1929035131','9','0','0'), ('614','525','205','<p>\r\n	1111111111111</p>','1567920785','1929035131','9','0','0'), ('615','525','205','<p>\r\n	22222222222222</p>','1567920808','1929035131','9','0','0'), ('619','594','10','<p>\r\n	sdfsfe&nbsp;</p>','1567924031','1929035131','9','0','0'), ('620','525','10','<p>\r\n	这是一条不可描述的帖子回复</p>','1567929050','1033225540','9','0','0'), ('621','616','10','','1567929679','1929035131','8','0','0'), ('622','618','10','<p>\r\n	抢我的群无</p>','1567930197','1929035131','9','0','0'), ('623','618','10','<p>\r\n	大青蛙多</p>','1567930202','1929035131','9','0','0'), ('624','618','10','<p>\r\n	聂哈佛和奥尔凡四</p>','1567932834','1033225540','9','0','0'), ('625','525','10','<p>\r\n	123</p>','1567933061','1929035131','9','0','0'), ('626','617','10','<p>\r\n	123</p>','1567934444','1033225540','9','0','0'), ('628','627','34','<p>\r\n	啊啊啊啊啊啊啊啊啊啊啊啊</p>','1567942221','1929035131','9','0','0'), ('629','627','34','<p>\r\n	啊啊啊啊啊啊啊啊啊啊啊啊</p>','1567942229','1929035131','9','0','0'), ('630','627','34','<p>\r\n	啊啊啊啊啊啊啊啊啊</p>','1567942245','1929035131','9','0','0'), ('631','627','34','<p>\r\n	aaaaaaaaaaaa</p>','1567945013','1929035131','9','0','0'), ('632','627','34','<p>\r\n	aaaaaaaaaaaa</p>','1567945024','1929035131','9','0','0'), ('633','581','195','','1567949034','1929035131','9','0','0'), ('637','594','192','<p>\r\n	bythy</p>','1567988735','1929035131','9','0','0'), ('638','627','34','<p>\r\n	aaaaaaaaaaaaaa</p>','1567988888','1929035131','9','0','0'), ('639','627','34','<p>\r\n	aaaaaaaaaaaaaa</p>','1567988895','1929035131','9','0','0'), ('640','627','34','<p>\r\n	ssssss</p>','1567989595','1929035131','9','0','0'), ('642','641','34','<p>\r\n	aaaaaaaa</p>','1567989614','1929035131','9','0','0'), ('643','636','10','<p>\r\n	hh</p>','1567993760','1033225540','9','0','0'), ('645','601','192','<p>\r\n	cvsd</p>','1568001411','1929035131','13','0','1'), ('646','542','189','<p>\r\n	1</p>','1568001627','1929035131','7','0','0'), ('650','649','34','','1568017367','1929035131','9','0','0'), ('651','649','34','','1568017375','1929035131','9','0','0'), ('654','644','195','<p>\r\n	回复内容啊</p>','1568020062','1929035131','9','0','0'), ('655','644','195','<p>\r\n	我其实只想回复回复， 看看效果</p>','1568020428','1929035131','9','0','0'), ('656','644','195','<p>\r\n	我才是想回复帖子， 而不是回复</p>','1568020461','1929035131','9','0','0'), ('657','542','189','<p>\r\n	2</p>','1568021609','1929035131','7','0','0'), ('663','588','10','<p>\r\n	123</p>','1568031784','1033225540','9','0','1'), ('664','662','10','<p>\r\n	aaa</p>','1568034145','1033225540','9','0','0'), ('665','588','200','<p>\r\n	111</p>','1568036738','1033225540','9','0','0'), ('670','644','10','<p>\r\n	ss</p>','1568083043','1929035131','9','0','0'), ('671','644','10','<p>\r\n	xiayiceng</p>','1568083061','1929035131','9','0','0'), ('672','644','10','<p>\r\n	ba</p>','1568083167','1033225540','9','0','1'), ('673','644','10','<p>\r\n	ba</p>','1568083177','1033225540','9','0','0'), ('677','669','10','<p>\r\n	ho</p>','1568083617','1033225540','9','0','0'), ('678','669','10','<p>\r\n	好</p>','1568085201','1033225540','9','1','0'), ('679','669','10','<p>\r\n	好</p>','1568085208','1033225540','9','0','0'), ('682','668','214','<p>\r\n	<strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</strong></p>','1568107664','1929035131','9','0','1'), ('683','668','214','<p>\r\n	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>','1568107671','1929035131','9','0','1'), ('684','668','214','','1568107676','1929035131','9','0','1'), ('685','668','214','','1568107681','1929035131','9','0','0'), ('686','668','214','','1568107686','1929035131','9','0','0'), ('687','668','214','','1568107692','1929035131','9','0','0'), ('688','668','214','','1568107697','1929035131','9','0','0'), ('689','668','10','<p>\r\n	xcxzc</p>','1568107697','1929035131','9','0','0'), ('690','668','214','','1568107703','1929035131','9','0','0'), ('691','668','214','','1568107709','1929035131','9','0','0'), ('692','668','214','','1568107715','1929035131','9','0','0'), ('693','668','10','<p>\r\n	111</p>','1568107722','1929035131','9','0','0'), ('694','668','214','<p>\r\n	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>','1568107722','1929035131','9','0','0'), ('695','668','214','<p>\r\n	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>','1568107722','1929035131','9','0','0'), ('696','668','214','<p>\r\n	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>','1568107727','1929035131','9','0','0'), ('697','668','214','<p>\r\n	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>','1568107742','1929035131','9','0','0'), ('698','661','214','<p>\r\n	<a href=\"http://www.baidu.com\" onclick=\"window.open(this.href, \'11111\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=no\'); return false;\">http://www.baidu.com</a></p>','1568107807','1929035131','9','0','0'), ('699','668','10','<p>\r\n	dfdsf</p>','1568107835','1929035131','9','0','0'), ('700','661','214','<p>\r\n	aaaaaaaaaaaaaaaaaaaaaaaaaa</p>','1568107835','1929035131','9','0','0'), ('702','701','214','<p>\r\n	aaaaaaaaaaaaaaaaaaaaaaaaaaa</p>','1568107855','1929035131','9','0','0');
INSERT INTO `bbs_user` VALUES ('200','a844581753','e10adc3949ba59abbe56e057f20f883e','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('201','lykzm','202cb962ac59075b964b07152d234b70','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('202','root123','ff9830c42660c1dd1942844f8069b74a','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('203','qq111','d25e9556754a32fd8b929ddb324d2693','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('204','qwe11','b8306e67ed345a4af687c8caebf627ce','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('205','cui','827ccb0eea8a706c4c34a16891f84e7b','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('206','123321','c8837b23ff8aaa8a2dde915473ce0991','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('207','qq985','930b25991d19191753f21dd4a1413fb6','0','2',NULL,NULL,'upload/2019/09/10/yh_5d776d82164d1.png',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('208','haitao','0c31240d0110f8188d7b3c52109e1185','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('209','asd000','b2ca678b4c936f905fb82f2733f5297f','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('210','wywzjkl','fbedd29473d11afb02d03ff9d09bbf61','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('211','wd000','00b12ce4ea2e10464a6c7b6c4ca5716a','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('212','wd111','0527da7dc59c5217fdd7b18716e32f0a','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('213','wd001','cf80fda75cb835fe905f70c53465f49a','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0'), ('214','hahada','202cb962ac59075b964b07152d234b70','0','2',NULL,NULL,'public/images/avatar_blank.gif',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','0');
